<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en">
    <title> - terminal</title>
    <link rel="self" type="application/atom+xml" href="https://mnt.io/keywords/terminal/atom.xml"/>
    <link rel="alternate" type="text/html" href="https://mnt.io"/>
    <generator uri="https://www.getzola.org/">Zola</generator>
    <updated>2015-01-04T00:00:00+00:00</updated>
    <id>https://mnt.io/keywords/terminal/atom.xml</id>
    <entry xml:lang="en">
        <title>Control the terminal, the right way</title>
        <published>2015-01-04T00:00:00+00:00</published>
        <updated>2015-01-04T00:00:00+00:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://mnt.io/articles/control-the-terminal-the-right-way/"/>
        <id>https://mnt.io/articles/control-the-terminal-the-right-way/</id>
        
        <content type="html" xml:base="https://mnt.io/articles/control-the-terminal-the-right-way/">&lt;p&gt;Nowadays, there are plenty of terminal emulators in the wild. Each one has
a specific way to handle controls. How many colours does it support? How to
control the style of a character? How to control more than style, like the
cursor or the window? In this article, we are going to explain and show in
action the right ways to control your terminal with a portable and an easy
to maintain API. We are going to talk about &lt;code&gt;stat&lt;&#x2F;code&gt;, &lt;code&gt;tput&lt;&#x2F;code&gt;, &lt;code&gt;terminfo&lt;&#x2F;code&gt;, &lt;code&gt;hoa&#x2F; console&lt;&#x2F;code&gt;… but do not be afraid, it&#x27;s easy and fun!&lt;&#x2F;p&gt;
&lt;h2 id=&quot;introduction&quot;&gt;Introduction&lt;a role=&quot;presentation&quot; class=&quot;anchor&quot; href=&quot;#introduction&quot; title=&quot;Anchor link to this header&quot;&gt;#&lt;&#x2F;a&gt;
&lt;&#x2F;h2&gt;
&lt;p&gt;Terminals. They are the ancient interfaces, still not old fashioned yet.
They are fast, efficient, work remotely with a low bandwidth, secured
and very simple to use.&lt;&#x2F;p&gt;
&lt;p&gt;A terminal is a canvas composed of columns and lines. Only one character
fits at a position. According to the terminal, we have some features
enabled; for instance, a character might be stylized with a colour, a
decoration, a weight etc. Let&#x27;s consider the former. A colour belongs to
a palette, which contains either 2, 8, 256 or more colours. One may
wonder:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;How many colours does a terminal support?&lt;&#x2F;li&gt;
&lt;li&gt;How to control the style of a character?&lt;&#x2F;li&gt;
&lt;li&gt;How to control more than style, like the cursor or the window?&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;Well, this article is going to explain how a terminal works and how we
interact with it. We are going to talk about terminal capabilities,
terminal information (stored in database) and
&lt;a rel=&quot;noopener external&quot; target=&quot;_blank&quot; href=&quot;http:&#x2F;&#x2F;github.com&#x2F;hoaproject&#x2F;Console&quot;&gt;&lt;code&gt;Hoa\Console&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;,
a PHP library that provides advanced terminal controls.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;the-basis-of-a-terminal&quot;&gt;The basis of a terminal&lt;a role=&quot;presentation&quot; class=&quot;anchor&quot; href=&quot;#the-basis-of-a-terminal&quot; title=&quot;Anchor link to this header&quot;&gt;#&lt;&#x2F;a&gt;
&lt;&#x2F;h2&gt;
&lt;p&gt;A terminal, or a console, is an interface that allows to interact with
the computer. This interface is textual. Like a graphical interface,
there are inputs: The keyboard and the mouse, and ouputs: The screen or
a file (a real file, a socket, a FIFO, something else…).&lt;&#x2F;p&gt;
&lt;p&gt;There is a ton of terminals. The most famous ones are:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a rel=&quot;noopener external&quot; target=&quot;_blank&quot; href=&quot;http:&#x2F;&#x2F;invisible-island.net&#x2F;xterm&#x2F;xterm.html&quot;&gt;xterm&lt;&#x2F;a&gt;,&lt;&#x2F;li&gt;
&lt;li&gt;&lt;a rel=&quot;noopener external&quot; target=&quot;_blank&quot; href=&quot;http:&#x2F;&#x2F;iterm2.com&#x2F;&quot;&gt;iTerm2&lt;&#x2F;a&gt;,&lt;&#x2F;li&gt;
&lt;li&gt;&lt;a rel=&quot;noopener external&quot; target=&quot;_blank&quot; href=&quot;http:&#x2F;&#x2F;software.schmorp.de&#x2F;pkg&#x2F;rxvt-unicode.html&quot;&gt;urxvt&lt;&#x2F;a&gt;,&lt;&#x2F;li&gt;
&lt;li&gt;&lt;a rel=&quot;noopener external&quot; target=&quot;_blank&quot; href=&quot;http:&#x2F;&#x2F;ttssh2.sourceforge.jp&#x2F;&quot;&gt;TeraTerm&lt;&#x2F;a&gt;.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;Whatever the terminal you use, inputs are handled by programs (or
processus) and outputs are produced by these latters. We said outputs
can be the screen or a file. Actually, everything is a file, so the
screen is also a file. However, the user is able to use
&lt;a rel=&quot;noopener external&quot; target=&quot;_blank&quot; href=&quot;http:&#x2F;&#x2F;gnu.org&#x2F;software&#x2F;bash&#x2F;manual&#x2F;bashref.html#Redirections&quot;&gt;redirections&lt;&#x2F;a&gt;
to choose where the ouputs must go.&lt;&#x2F;p&gt;
&lt;p&gt;Let&#x27;s consider the &lt;code&gt;echo&lt;&#x2F;code&gt; program that prints all its options&#x2F;arguments
on its output. Thus, in the following example, &lt;code&gt;foobar&lt;&#x2F;code&gt; is printed on
the screen:&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo z-code&quot;&gt;&lt;code data-lang=&quot;shellsession&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span class=&quot;z-punctuation z-separator&quot;&gt;$&lt;&#x2F;span&gt;&lt;span&gt; echo &lt;&#x2F;span&gt;&lt;span class=&quot;z-string&quot;&gt;&amp;#39;foobar&amp;#39;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;And in the following example, &lt;code&gt;foobar&lt;&#x2F;code&gt; is redirected to a file called
&lt;code&gt;log&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo z-code&quot;&gt;&lt;code data-lang=&quot;shellsession&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span class=&quot;z-punctuation z-separator&quot;&gt;$&lt;&#x2F;span&gt;&lt;span&gt; echo &lt;&#x2F;span&gt;&lt;span class=&quot;z-string&quot;&gt;&amp;#39;foobar&amp;#39;&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator&quot;&gt; &amp;gt;&lt;&#x2F;span&gt;&lt;span&gt; log&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;We are also able to redirect the output to another program, like &lt;code&gt;wc&lt;&#x2F;code&gt;
that counts stuff:&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo z-code&quot;&gt;&lt;code data-lang=&quot;shellsession&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span class=&quot;z-punctuation z-separator&quot;&gt;$&lt;&#x2F;span&gt;&lt;span&gt; echo &lt;&#x2F;span&gt;&lt;span class=&quot;z-string&quot;&gt;&amp;#39;foobar&amp;#39;&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator&quot;&gt; |&lt;&#x2F;span&gt;&lt;span class=&quot;z-entity z-name&quot;&gt; wc&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-other&quot;&gt; -c&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;7&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Now we know there are 7 characters in &lt;code&gt;foobar&lt;&#x2F;code&gt;… no! &lt;code&gt;echo&lt;&#x2F;code&gt; automatically
adds a new-line (&lt;code&gt;\n&lt;&#x2F;code&gt;) after each line; so:&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo z-code&quot;&gt;&lt;code data-lang=&quot;shellsession&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span class=&quot;z-punctuation z-separator&quot;&gt;$&lt;&#x2F;span&gt;&lt;span&gt; echo -n &lt;&#x2F;span&gt;&lt;span class=&quot;z-string&quot;&gt;&amp;#39;foobar&amp;#39;&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator&quot;&gt; |&lt;&#x2F;span&gt;&lt;span class=&quot;z-entity z-name&quot;&gt; wc&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-other&quot;&gt; -c&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;6&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;This is more correct!&lt;&#x2F;p&gt;
&lt;h2 id=&quot;detecting-type-of-pipes&quot;&gt;Detecting type of pipes&lt;a role=&quot;presentation&quot; class=&quot;anchor&quot; href=&quot;#detecting-type-of-pipes&quot; title=&quot;Anchor link to this header&quot;&gt;#&lt;&#x2F;a&gt;
&lt;&#x2F;h2&gt;
&lt;p&gt;Inputs and outputs are called &lt;strong&gt;pipes&lt;&#x2F;strong&gt;. Yes, trivial, this is nothing
more than basic pipes!&lt;&#x2F;p&gt;
&lt;p&gt;There are 3 standard pipes:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;STDIN&lt;&#x2F;code&gt;, standing for the standard input pipe,&lt;&#x2F;li&gt;
&lt;li&gt;&lt;code&gt;STDOUT&lt;&#x2F;code&gt;, standing for the standard output pipe and&lt;&#x2F;li&gt;
&lt;li&gt;&lt;code&gt;STDERR&lt;&#x2F;code&gt;, standing for the standard error pipe (also an output one).&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;If the output is attached to the screen, we say this is a “direct
output”. Why is it important? Because if we stylize a text, this is
&lt;strong&gt;only for the screen&lt;&#x2F;strong&gt;, not for a file. A file should receive regular
text, not all the decorations and styles.&lt;&#x2F;p&gt;
&lt;p&gt;Hopefully, the &lt;a rel=&quot;noopener external&quot; target=&quot;_blank&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;hoaproject&#x2F;Console&#x2F;blob&#x2F;master&#x2F;Source&#x2F;Console.php&quot;&gt;&lt;code&gt;Hoa\Console\Console&lt;&#x2F;code&gt;
class&lt;&#x2F;a&gt;
provides the &lt;code&gt;isDirect&lt;&#x2F;code&gt;, &lt;code&gt;isPipe&lt;&#x2F;code&gt; and &lt;code&gt;isRedirection&lt;&#x2F;code&gt; static methods to
know whether the pipe is respectively direct, a pipe or a redirection
(damn naming…!). Thus, let &lt;code&gt;Type.php&lt;&#x2F;code&gt; be the following program:&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo z-code&quot;&gt;&lt;code data-lang=&quot;php&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span class=&quot;z-keyword z-operator&quot;&gt;&amp;lt;?&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-other&quot;&gt;php&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span class=&quot;z-support z-function&quot;&gt;echo&lt;&#x2F;span&gt;&lt;span class=&quot;z-string&quot;&gt; &amp;#39;is direct:      &amp;#39;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator&quot;&gt;;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span class=&quot;z-support z-function&quot;&gt;var_dump&lt;&#x2F;span&gt;&lt;span&gt;(Hoa&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator&quot;&gt;\&lt;&#x2F;span&gt;&lt;span&gt;Console&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator&quot;&gt;\&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-class&quot;&gt;Console&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-entity z-name z-function&quot;&gt;isDirect&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-constant&quot;&gt;STDOUT&lt;&#x2F;span&gt;&lt;span&gt;))&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator&quot;&gt;;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span class=&quot;z-support z-function&quot;&gt;echo&lt;&#x2F;span&gt;&lt;span class=&quot;z-string&quot;&gt; &amp;#39;is pipe:        &amp;#39;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator&quot;&gt;;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span class=&quot;z-support z-function&quot;&gt;var_dump&lt;&#x2F;span&gt;&lt;span&gt;(Hoa&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator&quot;&gt;\&lt;&#x2F;span&gt;&lt;span&gt;Console&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator&quot;&gt;\&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-class&quot;&gt;Console&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-entity z-name z-function&quot;&gt;isPipe&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-constant&quot;&gt;STDOUT&lt;&#x2F;span&gt;&lt;span&gt;))&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator&quot;&gt;;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span class=&quot;z-support z-function&quot;&gt;echo&lt;&#x2F;span&gt;&lt;span class=&quot;z-string&quot;&gt; &amp;#39;is redirection: &amp;#39;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator&quot;&gt;;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span class=&quot;z-support z-function&quot;&gt;var_dump&lt;&#x2F;span&gt;&lt;span&gt;(Hoa&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator&quot;&gt;\&lt;&#x2F;span&gt;&lt;span&gt;Console&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator&quot;&gt;\&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-class&quot;&gt;Console&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-entity z-name z-function&quot;&gt;isRedirection&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-constant&quot;&gt;STDOUT&lt;&#x2F;span&gt;&lt;span&gt;))&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator&quot;&gt;;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Now, let&#x27;s test our program:&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo z-code&quot;&gt;&lt;code data-lang=&quot;shellsession&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span class=&quot;z-punctuation z-separator&quot;&gt;$&lt;&#x2F;span&gt;&lt;span&gt; php Type.php&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;is direct:      bool(true)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;is pipe:        bool(false)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;is redirection: bool(false)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span class=&quot;z-punctuation z-separator&quot;&gt;$&lt;&#x2F;span&gt;&lt;span&gt; php Type.php &lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator&quot;&gt;|&lt;&#x2F;span&gt;&lt;span class=&quot;z-entity z-name&quot;&gt; xargs&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-other&quot;&gt; -I@&lt;&#x2F;span&gt;&lt;span class=&quot;z-string&quot;&gt; echo @&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;is direct:      bool(false)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;is pipe:        bool(true)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;is redirection: bool(false)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span class=&quot;z-punctuation z-separator&quot;&gt;$&lt;&#x2F;span&gt;&lt;span&gt; php Type.php &lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;span&gt; &#x2F;tmp&#x2F;foo&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator&quot;&gt;;&lt;&#x2F;span&gt;&lt;span class=&quot;z-entity z-name&quot;&gt; cat&lt;&#x2F;span&gt;&lt;span class=&quot;z-string&quot;&gt; !!&lt;&#x2F;span&gt;&lt;span&gt;$&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;is direct:      bool(false)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;is pipe:        bool(false)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;is redirection: bool(true)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;The first execution is very classic. &lt;code&gt;STDOUT&lt;&#x2F;code&gt;, the standard output, is
direct. The second execution redirects the output to another program,
then &lt;code&gt;STDOUT&lt;&#x2F;code&gt; is of kind pipe. Finally, the last execution redirects the
output to a file called &lt;code&gt;&#x2F;tmp&#x2F;foo&lt;&#x2F;code&gt;, so &lt;code&gt;STDOUT&lt;&#x2F;code&gt; is a redirection.&lt;&#x2F;p&gt;
&lt;p&gt;How does it work? We use &lt;a rel=&quot;noopener external&quot; target=&quot;_blank&quot; href=&quot;http:&#x2F;&#x2F;php.net&#x2F;fstat&quot;&gt;&lt;code&gt;fstat&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; to read the
&lt;code&gt;mode&lt;&#x2F;code&gt; of the file. The underlying &lt;code&gt;fstat&lt;&#x2F;code&gt; implementation is defined in
C, so let&#x27;s take a look at the &lt;a rel=&quot;noopener external&quot; target=&quot;_blank&quot; href=&quot;http:&#x2F;&#x2F;man.cx&#x2F;fstat%282%29&quot;&gt;documentation of
&lt;code&gt;fstat(2)&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;. &lt;code&gt;stat&lt;&#x2F;code&gt; is a C structure that
looks like:&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo z-code&quot;&gt;&lt;code data-lang=&quot;c&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span class=&quot;z-storage z-type&quot;&gt;struct&lt;&#x2F;span&gt;&lt;span&gt; stat &lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section&quot;&gt;{&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span class=&quot;z-storage z-type&quot;&gt;    dev_t&lt;&#x2F;span&gt;&lt;span&gt;    st_dev&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator&quot;&gt;;&lt;&#x2F;span&gt;&lt;span class=&quot;z-comment&quot;&gt;              &#x2F;* device inode resides on             *&#x2F;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span class=&quot;z-storage z-type&quot;&gt;    ino_t&lt;&#x2F;span&gt;&lt;span&gt;    st_ino&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator&quot;&gt;;&lt;&#x2F;span&gt;&lt;span class=&quot;z-comment&quot;&gt;              &#x2F;* inode&amp;#39;s number                      *&#x2F;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span class=&quot;z-storage z-type&quot;&gt;    mode_t&lt;&#x2F;span&gt;&lt;span&gt;   st_mode&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator&quot;&gt;;&lt;&#x2F;span&gt;&lt;span class=&quot;z-comment&quot;&gt;             &#x2F;* inode protection mode               *&#x2F;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span class=&quot;z-storage z-type&quot;&gt;    nlink_t&lt;&#x2F;span&gt;&lt;span&gt;  st_nlink&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator&quot;&gt;;&lt;&#x2F;span&gt;&lt;span class=&quot;z-comment&quot;&gt;            &#x2F;* number of hard links to the file    *&#x2F;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span class=&quot;z-storage z-type&quot;&gt;    uid_t&lt;&#x2F;span&gt;&lt;span&gt;    st_uid&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator&quot;&gt;;&lt;&#x2F;span&gt;&lt;span class=&quot;z-comment&quot;&gt;              &#x2F;* user-id of owner                    *&#x2F;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span class=&quot;z-storage z-type&quot;&gt;    gid_t&lt;&#x2F;span&gt;&lt;span&gt;    st_gid&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator&quot;&gt;;&lt;&#x2F;span&gt;&lt;span class=&quot;z-comment&quot;&gt;              &#x2F;* group-id of owner                   *&#x2F;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span class=&quot;z-storage z-type&quot;&gt;    dev_t&lt;&#x2F;span&gt;&lt;span&gt;    st_rdev&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator&quot;&gt;;&lt;&#x2F;span&gt;&lt;span class=&quot;z-comment&quot;&gt;             &#x2F;* device type, for special file inode *&#x2F;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span class=&quot;z-storage z-type&quot;&gt;    struct&lt;&#x2F;span&gt;&lt;span&gt; timespec st_atimespec&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator&quot;&gt;;&lt;&#x2F;span&gt;&lt;span class=&quot;z-comment&quot;&gt; &#x2F;* time of last access                 *&#x2F;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span class=&quot;z-storage z-type&quot;&gt;    struct&lt;&#x2F;span&gt;&lt;span&gt; timespec st_mtimespec&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator&quot;&gt;;&lt;&#x2F;span&gt;&lt;span class=&quot;z-comment&quot;&gt; &#x2F;* time of last data modification      *&#x2F;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span class=&quot;z-storage z-type&quot;&gt;    struct&lt;&#x2F;span&gt;&lt;span&gt; timespec st_ctimespec&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator&quot;&gt;;&lt;&#x2F;span&gt;&lt;span class=&quot;z-comment&quot;&gt; &#x2F;* time of last file status change     *&#x2F;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span class=&quot;z-storage z-type&quot;&gt;    off_t&lt;&#x2F;span&gt;&lt;span&gt;    st_size&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator&quot;&gt;;&lt;&#x2F;span&gt;&lt;span class=&quot;z-comment&quot;&gt;             &#x2F;* file size, in bytes                 *&#x2F;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span class=&quot;z-storage z-type&quot;&gt;    quad_t&lt;&#x2F;span&gt;&lt;span&gt;   st_blocks&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator&quot;&gt;;&lt;&#x2F;span&gt;&lt;span class=&quot;z-comment&quot;&gt;           &#x2F;* blocks allocated for file           *&#x2F;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span class=&quot;z-storage z-type&quot;&gt;    u_long&lt;&#x2F;span&gt;&lt;span&gt;   st_blksize&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator&quot;&gt;;&lt;&#x2F;span&gt;&lt;span class=&quot;z-comment&quot;&gt;          &#x2F;* optimal file sys I&#x2F;O ops blocksize  *&#x2F;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span class=&quot;z-storage z-type&quot;&gt;    u_long&lt;&#x2F;span&gt;&lt;span&gt;   st_flags&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator&quot;&gt;;&lt;&#x2F;span&gt;&lt;span class=&quot;z-comment&quot;&gt;            &#x2F;* user defined flags for file         *&#x2F;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span class=&quot;z-storage z-type&quot;&gt;    u_long&lt;&#x2F;span&gt;&lt;span&gt;   st_gen&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator&quot;&gt;;&lt;&#x2F;span&gt;&lt;span class=&quot;z-comment&quot;&gt;              &#x2F;* file generation number              *&#x2F;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span class=&quot;z-punctuation z-section&quot;&gt;}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;The value of &lt;code&gt;mode&lt;&#x2F;code&gt; returned by the PHP &lt;code&gt;fstat&lt;&#x2F;code&gt; function is equal to
&lt;code&gt;st_mode&lt;&#x2F;code&gt; in this structure. And &lt;code&gt;st_mode&lt;&#x2F;code&gt; has the following bits:&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo z-code&quot;&gt;&lt;code data-lang=&quot;c&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span class=&quot;z-keyword&quot;&gt;#define&lt;&#x2F;span&gt;&lt;span class=&quot;z-entity z-name z-function&quot;&gt; S_IFMT&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword&quot;&gt;   0&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-numeric&quot;&gt;170000&lt;&#x2F;span&gt;&lt;span class=&quot;z-comment&quot;&gt; &#x2F;* type of file mask                *&#x2F;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span class=&quot;z-keyword&quot;&gt;#define&lt;&#x2F;span&gt;&lt;span class=&quot;z-entity z-name z-function&quot;&gt; S_IFIFO&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword&quot;&gt;  0&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-numeric&quot;&gt;010000&lt;&#x2F;span&gt;&lt;span class=&quot;z-comment&quot;&gt; &#x2F;* named pipe (fifo)                *&#x2F;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span class=&quot;z-keyword&quot;&gt;#define&lt;&#x2F;span&gt;&lt;span class=&quot;z-entity z-name z-function&quot;&gt; S_IFCHR&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword&quot;&gt;  0&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-numeric&quot;&gt;020000&lt;&#x2F;span&gt;&lt;span class=&quot;z-comment&quot;&gt; &#x2F;* character special                *&#x2F;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span class=&quot;z-keyword&quot;&gt;#define&lt;&#x2F;span&gt;&lt;span class=&quot;z-entity z-name z-function&quot;&gt; S_IFDIR&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword&quot;&gt;  0&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-numeric&quot;&gt;040000&lt;&#x2F;span&gt;&lt;span class=&quot;z-comment&quot;&gt; &#x2F;* directory                        *&#x2F;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span class=&quot;z-keyword&quot;&gt;#define&lt;&#x2F;span&gt;&lt;span class=&quot;z-entity z-name z-function&quot;&gt; S_IFBLK&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword&quot;&gt;  0&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-numeric&quot;&gt;060000&lt;&#x2F;span&gt;&lt;span class=&quot;z-comment&quot;&gt; &#x2F;* block special                    *&#x2F;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span class=&quot;z-keyword&quot;&gt;#define&lt;&#x2F;span&gt;&lt;span class=&quot;z-entity z-name z-function&quot;&gt; S_IFREG&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword&quot;&gt;  0&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-numeric&quot;&gt;100000&lt;&#x2F;span&gt;&lt;span class=&quot;z-comment&quot;&gt; &#x2F;* regular                          *&#x2F;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span class=&quot;z-keyword&quot;&gt;#define&lt;&#x2F;span&gt;&lt;span class=&quot;z-entity z-name z-function&quot;&gt; S_IFLNK&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword&quot;&gt;  0&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-numeric&quot;&gt;120000&lt;&#x2F;span&gt;&lt;span class=&quot;z-comment&quot;&gt; &#x2F;* symbolic link                    *&#x2F;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span class=&quot;z-keyword&quot;&gt;#define&lt;&#x2F;span&gt;&lt;span class=&quot;z-entity z-name z-function&quot;&gt; S_IFSOCK&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword&quot;&gt; 0&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-numeric&quot;&gt;140000&lt;&#x2F;span&gt;&lt;span class=&quot;z-comment&quot;&gt; &#x2F;* socket                           *&#x2F;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span class=&quot;z-keyword&quot;&gt;#define&lt;&#x2F;span&gt;&lt;span class=&quot;z-entity z-name z-function&quot;&gt; S_IFWHT&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword&quot;&gt;  0&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-numeric&quot;&gt;160000&lt;&#x2F;span&gt;&lt;span class=&quot;z-comment&quot;&gt; &#x2F;* whiteout                         *&#x2F;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span class=&quot;z-keyword&quot;&gt;#define&lt;&#x2F;span&gt;&lt;span class=&quot;z-entity z-name z-function&quot;&gt; S_ISUID&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword&quot;&gt;  0&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-numeric&quot;&gt;004000&lt;&#x2F;span&gt;&lt;span class=&quot;z-comment&quot;&gt; &#x2F;* set user id on execution         *&#x2F;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span class=&quot;z-keyword&quot;&gt;#define&lt;&#x2F;span&gt;&lt;span class=&quot;z-entity z-name z-function&quot;&gt; S_ISGID&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword&quot;&gt;  0&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-numeric&quot;&gt;002000&lt;&#x2F;span&gt;&lt;span class=&quot;z-comment&quot;&gt; &#x2F;* set group id on execution        *&#x2F;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span class=&quot;z-keyword&quot;&gt;#define&lt;&#x2F;span&gt;&lt;span class=&quot;z-entity z-name z-function&quot;&gt; S_ISVTX&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword&quot;&gt;  0&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-numeric&quot;&gt;001000&lt;&#x2F;span&gt;&lt;span class=&quot;z-comment&quot;&gt; &#x2F;* save swapped text even after use *&#x2F;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span class=&quot;z-keyword&quot;&gt;#define&lt;&#x2F;span&gt;&lt;span class=&quot;z-entity z-name z-function&quot;&gt; S_IRWXU&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword&quot;&gt;  0&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-numeric&quot;&gt;000700&lt;&#x2F;span&gt;&lt;span class=&quot;z-comment&quot;&gt; &#x2F;* RWX mask for owner               *&#x2F;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span class=&quot;z-keyword&quot;&gt;#define&lt;&#x2F;span&gt;&lt;span class=&quot;z-entity z-name z-function&quot;&gt; S_IRUSR&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword&quot;&gt;  0&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-numeric&quot;&gt;000400&lt;&#x2F;span&gt;&lt;span class=&quot;z-comment&quot;&gt; &#x2F;* read permission, owner           *&#x2F;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span class=&quot;z-keyword&quot;&gt;#define&lt;&#x2F;span&gt;&lt;span class=&quot;z-entity z-name z-function&quot;&gt; S_IWUSR&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword&quot;&gt;  0&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-numeric&quot;&gt;000200&lt;&#x2F;span&gt;&lt;span class=&quot;z-comment&quot;&gt; &#x2F;* write permission, owner          *&#x2F;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span class=&quot;z-keyword&quot;&gt;#define&lt;&#x2F;span&gt;&lt;span class=&quot;z-entity z-name z-function&quot;&gt; S_IXUSR&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword&quot;&gt;  0&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-numeric&quot;&gt;000100&lt;&#x2F;span&gt;&lt;span class=&quot;z-comment&quot;&gt; &#x2F;* execute&#x2F;search permission, owner *&#x2F;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span class=&quot;z-keyword&quot;&gt;#define&lt;&#x2F;span&gt;&lt;span class=&quot;z-entity z-name z-function&quot;&gt; S_IRWXG&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword&quot;&gt;  0&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-numeric&quot;&gt;000070&lt;&#x2F;span&gt;&lt;span class=&quot;z-comment&quot;&gt; &#x2F;* RWX mask for group               *&#x2F;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span class=&quot;z-keyword&quot;&gt;#define&lt;&#x2F;span&gt;&lt;span class=&quot;z-entity z-name z-function&quot;&gt; S_IRGRP&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword&quot;&gt;  0&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-numeric&quot;&gt;000040&lt;&#x2F;span&gt;&lt;span class=&quot;z-comment&quot;&gt; &#x2F;* read permission, group           *&#x2F;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span class=&quot;z-keyword&quot;&gt;#define&lt;&#x2F;span&gt;&lt;span class=&quot;z-entity z-name z-function&quot;&gt; S_IWGRP&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword&quot;&gt;  0&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-numeric&quot;&gt;000020&lt;&#x2F;span&gt;&lt;span class=&quot;z-comment&quot;&gt; &#x2F;* write permission, group          *&#x2F;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span class=&quot;z-keyword&quot;&gt;#define&lt;&#x2F;span&gt;&lt;span class=&quot;z-entity z-name z-function&quot;&gt; S_IXGRP&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword&quot;&gt;  0&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-numeric&quot;&gt;000010&lt;&#x2F;span&gt;&lt;span class=&quot;z-comment&quot;&gt; &#x2F;* execute&#x2F;search permission, group *&#x2F;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span class=&quot;z-keyword&quot;&gt;#define&lt;&#x2F;span&gt;&lt;span class=&quot;z-entity z-name z-function&quot;&gt; S_IRWXO&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword&quot;&gt;  0&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-numeric&quot;&gt;000007&lt;&#x2F;span&gt;&lt;span class=&quot;z-comment&quot;&gt; &#x2F;* RWX mask for other               *&#x2F;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span class=&quot;z-keyword&quot;&gt;#define&lt;&#x2F;span&gt;&lt;span class=&quot;z-entity z-name z-function&quot;&gt; S_IROTH&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword&quot;&gt;  0&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-numeric&quot;&gt;000004&lt;&#x2F;span&gt;&lt;span class=&quot;z-comment&quot;&gt; &#x2F;* read permission, other           *&#x2F;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span class=&quot;z-keyword&quot;&gt;#define&lt;&#x2F;span&gt;&lt;span class=&quot;z-entity z-name z-function&quot;&gt; S_IWOTH&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword&quot;&gt;  0&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-numeric&quot;&gt;000002&lt;&#x2F;span&gt;&lt;span class=&quot;z-comment&quot;&gt; &#x2F;* write permission, other          *&#x2F;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span class=&quot;z-keyword&quot;&gt;#define&lt;&#x2F;span&gt;&lt;span class=&quot;z-entity z-name z-function&quot;&gt; S_IXOTH&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword&quot;&gt;  0&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-numeric&quot;&gt;000001&lt;&#x2F;span&gt;&lt;span class=&quot;z-comment&quot;&gt; &#x2F;* execute&#x2F;search permission, other *&#x2F;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Awesome, we have everything we need! We mask &lt;code&gt;mode&lt;&#x2F;code&gt; with &lt;code&gt;S_IFMT&lt;&#x2F;code&gt; to get
the file data. Then we just have to check whether it is a named pipe
&lt;code&gt;S_IFIFO&lt;&#x2F;code&gt;, a character special &lt;code&gt;S_IFCHR&lt;&#x2F;code&gt; etc. Concretly:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;isDirect&lt;&#x2F;code&gt; checks that the mode is equal to &lt;code&gt;S_IFCHR&lt;&#x2F;code&gt;, it means it is
attached to the screen (in our case),&lt;&#x2F;li&gt;
&lt;li&gt;&lt;code&gt;isPipe&lt;&#x2F;code&gt; checks that the mode is equal to &lt;code&gt;S_IFIFO&lt;&#x2F;code&gt;: This is a special file
that behaves like a FIFO stack (see the
&lt;a rel=&quot;noopener external&quot; target=&quot;_blank&quot; href=&quot;http:&#x2F;&#x2F;www.freebsd.org&#x2F;cgi&#x2F;man.cgi?query=mkfifo&amp;amp;sektion=1&quot;&gt;documentation of &lt;code&gt;mkfifo(1)&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;), everything which is written is
directly read just after and the reading order is defined by the writing order
(first-in, first-out!),&lt;&#x2F;li&gt;
&lt;li&gt;&lt;code&gt;isRedirection&lt;&#x2F;code&gt; checks that the mode is equal to &lt;code&gt;S_IFREG&lt;&#x2F;code&gt; , &lt;code&gt;S_IFDIR&lt;&#x2F;code&gt; ,
&lt;code&gt;S_IFLNK&lt;&#x2F;code&gt; , &lt;code&gt;S_IFSOCK&lt;&#x2F;code&gt; or &lt;code&gt;S_IFBLK&lt;&#x2F;code&gt; , in other words: All kind of files on
which we can apply a redirection. Why? Because the &lt;code&gt;STDOUT&lt;&#x2F;code&gt; (or another
&lt;code&gt;STD_*_&lt;&#x2F;code&gt; pipe) of the current processus is defined as a file pointer to the
redirection destination and it can be only a file, a directory, a link, a
socket or a block file.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;I encourage you to read the &lt;a rel=&quot;noopener external&quot; target=&quot;_blank&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;hoaproject&#x2F;Console&#x2F;blob&#x2F;master&#x2F;Source&#x2F;Console.php&quot;&gt;implementation of the
&lt;code&gt;Hoa\Console\Console::getMode&lt;&#x2F;code&gt;
method&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;So yes, this is useful to enable styles on text but also to define the
default verbosity level. For instance, if a program outputs the result
of a computation with some explanations around, the highest verbosity
level would output everything (the result and the explanations) while
the lowest level would output only the result. Let&#x27;s try with the
&lt;code&gt;toUpperCase.php&lt;&#x2F;code&gt; program:&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo z-code&quot;&gt;&lt;code data-lang=&quot;php&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span class=&quot;z-keyword z-operator&quot;&gt;&amp;lt;?&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-other&quot;&gt;php&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span class=&quot;z-variable&quot;&gt;$verbose&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator&quot;&gt; =&lt;&#x2F;span&gt;&lt;span&gt; Hoa&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator&quot;&gt;\&lt;&#x2F;span&gt;&lt;span&gt;Console&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator&quot;&gt;\&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-class&quot;&gt;Console&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-entity z-name z-function&quot;&gt;isDirect&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-constant&quot;&gt;STDOUT&lt;&#x2F;span&gt;&lt;span&gt;)&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator&quot;&gt;;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span class=&quot;z-variable&quot;&gt;$string&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator&quot;&gt;  =&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable&quot;&gt; $argv&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section&quot;&gt;[&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-numeric&quot;&gt;1&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section&quot;&gt;]&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator&quot;&gt;;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span class=&quot;z-variable&quot;&gt;$result&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator&quot;&gt;  =&lt;&#x2F;span&gt;&lt;span&gt; (&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword&quot;&gt;new&lt;&#x2F;span&gt;&lt;span&gt; Hoa&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator&quot;&gt;\&lt;&#x2F;span&gt;&lt;span&gt;String&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator&quot;&gt;\&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-class&quot;&gt;String&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable&quot;&gt;$string&lt;&#x2F;span&gt;&lt;span&gt;))&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator&quot;&gt;-&amp;gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-entity z-name z-function&quot;&gt;toUpperCase&lt;&#x2F;span&gt;&lt;span&gt;()&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator&quot;&gt;;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span class=&quot;z-keyword&quot;&gt;if&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-language&quot;&gt;true&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator&quot;&gt; ===&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable&quot;&gt; $verbose&lt;&#x2F;span&gt;&lt;span&gt;) {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span class=&quot;z-support z-function&quot;&gt;    echo&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable&quot;&gt; $string&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator&quot;&gt;,&lt;&#x2F;span&gt;&lt;span class=&quot;z-string&quot;&gt; &amp;#39; becomes &amp;#39;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator&quot;&gt;,&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable&quot;&gt; $result&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator&quot;&gt;,&lt;&#x2F;span&gt;&lt;span class=&quot;z-string&quot;&gt; &amp;#39; in upper case!&amp;#39;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator&quot;&gt;,&lt;&#x2F;span&gt;&lt;span class=&quot;z-string&quot;&gt; &amp;quot;&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-character&quot;&gt;\n&lt;&#x2F;span&gt;&lt;span class=&quot;z-string&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator&quot;&gt;;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;}&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword&quot;&gt; else&lt;&#x2F;span&gt;&lt;span&gt; {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span class=&quot;z-support z-function&quot;&gt;    echo&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable&quot;&gt; $result&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator&quot;&gt;,&lt;&#x2F;span&gt;&lt;span class=&quot;z-string&quot;&gt; &amp;quot;&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-character&quot;&gt;\n&lt;&#x2F;span&gt;&lt;span class=&quot;z-string&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator&quot;&gt;;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Then, let&#x27;s execute this program:&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo z-code&quot;&gt;&lt;code data-lang=&quot;shellsession&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span class=&quot;z-punctuation z-separator&quot;&gt;$&lt;&#x2F;span&gt;&lt;span&gt; php toUpperCase.php &lt;&#x2F;span&gt;&lt;span class=&quot;z-string&quot;&gt;&amp;#39;Hello world!&amp;#39;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;Hello world! becomes HELLO WORLD! in upper case!&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;And now, let&#x27;s execute this program with a pipe:&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo z-code&quot;&gt;&lt;code data-lang=&quot;shellsession&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span class=&quot;z-punctuation z-separator&quot;&gt;$&lt;&#x2F;span&gt;&lt;span&gt; php toUpperCase.php &lt;&#x2F;span&gt;&lt;span class=&quot;z-string&quot;&gt;&amp;#39;Hello world!&amp;#39;&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator&quot;&gt; |&lt;&#x2F;span&gt;&lt;span class=&quot;z-entity z-name&quot;&gt; xargs&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-other&quot;&gt; -I@&lt;&#x2F;span&gt;&lt;span class=&quot;z-string&quot;&gt; echo @&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;HELLO WORLD!&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Useful and very simple, isn&#x27;t it?&lt;&#x2F;p&gt;
&lt;h2 id=&quot;terminal-capabilities&quot;&gt;Terminal capabilities&lt;a role=&quot;presentation&quot; class=&quot;anchor&quot; href=&quot;#terminal-capabilities&quot; title=&quot;Anchor link to this header&quot;&gt;#&lt;&#x2F;a&gt;
&lt;&#x2F;h2&gt;
&lt;p&gt;We can control the terminal with the inputs, like the keyboard, but we
can also control the outputs. How? With the text itself. Actually, an
output does not contain only the text but it includes &lt;strong&gt;control
functions&lt;&#x2F;strong&gt;. It&#x27;s like HTML: Around a text, you can have an element,
specifying that the text is a link. It&#x27;s exactly the same for terminals!
To specify that a text must be in red, we must add a control function
around it.&lt;&#x2F;p&gt;
&lt;p&gt;Hopefully, these control functions have been standardized in the
&lt;a rel=&quot;noopener external&quot; target=&quot;_blank&quot; href=&quot;http:&#x2F;&#x2F;www.ecma-international.org&#x2F;publications&#x2F;files&#x2F;ECMA-ST&#x2F;Ecma-048.pdf&quot;&gt;ECMA-48&lt;&#x2F;a&gt;
document: Control Functions for Coded Character Set. However, not all
terminals implement all this standard, and for historical reasons, some
terminals use slightly different control functions. Moreover, some
information do not belong to this standard (because this is out of its
scope), like: How many colours does the terminal support? or does the
terminal support the meta key?&lt;&#x2F;p&gt;
&lt;p&gt;Consequently, each terminal has a list of &lt;strong&gt;capabilities&lt;&#x2F;strong&gt;. This list is
splitted in &lt;strong&gt;3 categories&lt;&#x2F;strong&gt;:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;boolean capabilities,&lt;&#x2F;li&gt;
&lt;li&gt;number capabilities,&lt;&#x2F;li&gt;
&lt;li&gt;string capabilities.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;For instance:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;the “does the terminal support the meta key” is a boolean capability called
&lt;code&gt;meta_key&lt;&#x2F;code&gt; where its value is &lt;code&gt;true&lt;&#x2F;code&gt; or &lt;code&gt;false&lt;&#x2F;code&gt;,&lt;&#x2F;li&gt;
&lt;li&gt;the “number of colours supported by the terminal” is a… number capability
called &lt;code&gt;max_colors&lt;&#x2F;code&gt; where its value can be &lt;code&gt;2&lt;&#x2F;code&gt;, &lt;code&gt;8&lt;&#x2F;code&gt;, &lt;code&gt;256&lt;&#x2F;code&gt; or more,&lt;&#x2F;li&gt;
&lt;li&gt;the “clear screen control function” is a string capability called
&lt;code&gt;clear_screen&lt;&#x2F;code&gt; where its value might be &lt;code&gt;\e[H\e[2J&lt;&#x2F;code&gt;,&lt;&#x2F;li&gt;
&lt;li&gt;the “move the cursor one column to the right” is also a string capability
called &lt;code&gt;cursor_right&lt;&#x2F;code&gt; where its value might be &lt;code&gt;\e[C&lt;&#x2F;code&gt; .&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;All the capabilities can be found in the &lt;a rel=&quot;noopener external&quot; target=&quot;_blank&quot; href=&quot;http:&#x2F;&#x2F;www.freebsd.org&#x2F;cgi&#x2F;man.cgi?query=terminfo&amp;amp;sektion=5&quot;&gt;documentation of
&lt;code&gt;terminfo(5)&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;
or in the &lt;a rel=&quot;noopener external&quot; target=&quot;_blank&quot; href=&quot;http:&#x2F;&#x2F;pubs.opengroup.org&#x2F;onlinepubs&#x2F;7908799&#x2F;xcurses&#x2F;terminfo.html&quot;&gt;documentation of
xcurses&lt;&#x2F;a&gt;.
I encourage you to follow these links and see how rich the terminal
capabilities are!&lt;&#x2F;p&gt;
&lt;h2 id=&quot;terminal-information&quot;&gt;Terminal information&lt;a role=&quot;presentation&quot; class=&quot;anchor&quot; href=&quot;#terminal-information&quot; title=&quot;Anchor link to this header&quot;&gt;#&lt;&#x2F;a&gt;
&lt;&#x2F;h2&gt;
&lt;p&gt;Terminal capabilities are stored as &lt;strong&gt;information&lt;&#x2F;strong&gt; in &lt;strong&gt;databases&lt;&#x2F;strong&gt;.
Where are these databases located? In files with a binary format.
Favorite locations are:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;&#x2F;usr&#x2F;share&#x2F;terminfo&lt;&#x2F;code&gt;,&lt;&#x2F;li&gt;
&lt;li&gt;&lt;code&gt;&#x2F;usr&#x2F;share&#x2F;lib&#x2F;terminfo&lt;&#x2F;code&gt;,&lt;&#x2F;li&gt;
&lt;li&gt;&lt;code&gt;&#x2F;lib&#x2F;terminfo&lt;&#x2F;code&gt;,&lt;&#x2F;li&gt;
&lt;li&gt;&lt;code&gt;&#x2F;usr&#x2F;lib&#x2F;terminfo&lt;&#x2F;code&gt;,&lt;&#x2F;li&gt;
&lt;li&gt;&lt;code&gt;&#x2F;usr&#x2F;local&#x2F;share&#x2F;terminfo&lt;&#x2F;code&gt;,&lt;&#x2F;li&gt;
&lt;li&gt;&lt;code&gt;&#x2F;usr&#x2F;local&#x2F;share&#x2F;lib&#x2F;terminfo&lt;&#x2F;code&gt;,&lt;&#x2F;li&gt;
&lt;li&gt;etc.&lt;&#x2F;li&gt;
&lt;li&gt;or the &lt;code&gt;TERMINFO&lt;&#x2F;code&gt; or &lt;code&gt;TERMINFO_DIRS&lt;&#x2F;code&gt; environment variables.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;Inside these directories, we have a tree of the form: &lt;code&gt;_xx_&#x2F;_name_&lt;&#x2F;code&gt;,
where &lt;code&gt;_xx_&lt;&#x2F;code&gt; is the ASCII value in hexadecimal of the first letter of
the terminal name &lt;code&gt;_name_&lt;&#x2F;code&gt;, or &lt;code&gt;_n_&#x2F;_name_&lt;&#x2F;code&gt; where &lt;code&gt;_n_&lt;&#x2F;code&gt; is the first
letter of the terminal name. The terminal name is stored in the &lt;code&gt;TERM&lt;&#x2F;code&gt;
environment variable. For instance, on my computer:&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo z-code&quot;&gt;&lt;code data-lang=&quot;shellsession&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span class=&quot;z-punctuation z-separator&quot;&gt;$&lt;&#x2F;span&gt;&lt;span&gt; echo &lt;&#x2F;span&gt;&lt;span class=&quot;z-variable&quot;&gt;$TERM&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;xterm-256color&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span class=&quot;z-punctuation z-separator&quot;&gt;$&lt;&#x2F;span&gt;&lt;span&gt; file &#x2F;usr&#x2F;share&#x2F;terminfo&#x2F;78&#x2F;xterm-256color&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;&#x2F;usr&#x2F;share&#x2F;terminfo&#x2F;78&#x2F;xterm-256color: Compiled terminfo entry&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;We can use the &lt;a rel=&quot;noopener external&quot; target=&quot;_blank&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;hoaproject&#x2F;Console&#x2F;blob&#x2F;master&#x2F;Source&#x2F;Tput.php&quot;&gt;&lt;code&gt;Hoa\Console\Tput&lt;&#x2F;code&gt;
class&lt;&#x2F;a&gt;
to retrieve these information. The &lt;code&gt;getTerminfo&lt;&#x2F;code&gt; static method allows to
get the path of the terminal information file. The &lt;code&gt;getTerm&lt;&#x2F;code&gt; static
method allows to get the terminal name. Finally, the whole class allows
to parse a terminal information database (it will use the file returned
by &lt;code&gt;getTerminfo&lt;&#x2F;code&gt; by default). For instance:&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo z-code&quot;&gt;&lt;code data-lang=&quot;php&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span class=&quot;z-keyword z-operator&quot;&gt;&amp;lt;?&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-other&quot;&gt;php&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span class=&quot;z-variable&quot;&gt;$tput&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator&quot;&gt; =&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword&quot;&gt; new&lt;&#x2F;span&gt;&lt;span&gt; Hoa&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator&quot;&gt;\&lt;&#x2F;span&gt;&lt;span&gt;Console&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator&quot;&gt;\&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-class&quot;&gt;Tput&lt;&#x2F;span&gt;&lt;span&gt;()&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator&quot;&gt;;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span class=&quot;z-support z-function&quot;&gt;var_dump&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable&quot;&gt;$tput&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator&quot;&gt;-&amp;gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-entity z-name z-function&quot;&gt;count&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-string&quot;&gt;&amp;#39;max_colors&amp;#39;&lt;&#x2F;span&gt;&lt;span&gt;))&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator&quot;&gt;;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span class=&quot;z-comment&quot;&gt;&#x2F;**&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span class=&quot;z-comment&quot;&gt; * Will output:&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span class=&quot;z-comment&quot;&gt; *     int(256)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span class=&quot;z-comment&quot;&gt; *&#x2F;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;On my computer, with &lt;code&gt;xterm-256color&lt;&#x2F;code&gt;, I have 256 colours, as expected.
If we parse the information of &lt;code&gt;xterm&lt;&#x2F;code&gt; and not &lt;code&gt;xterm-256color&lt;&#x2F;code&gt;, we will
have:&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo z-code&quot;&gt;&lt;code data-lang=&quot;php&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span class=&quot;z-variable&quot;&gt;$tput&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator&quot;&gt; =&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword&quot;&gt; new&lt;&#x2F;span&gt;&lt;span&gt; Hoa&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator&quot;&gt;\&lt;&#x2F;span&gt;&lt;span&gt;Console&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator&quot;&gt;\&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-class&quot;&gt;Tput&lt;&#x2F;span&gt;&lt;span&gt;(Hoa&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator&quot;&gt;\&lt;&#x2F;span&gt;&lt;span&gt;Console&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator&quot;&gt;\&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-class&quot;&gt;Tput&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-entity z-name z-function&quot;&gt;getTerminfo&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-string&quot;&gt;&amp;#39;xterm&amp;#39;&lt;&#x2F;span&gt;&lt;span&gt;))&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator&quot;&gt;;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span class=&quot;z-support z-function&quot;&gt;var_dump&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable&quot;&gt;$tput&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator&quot;&gt;-&amp;gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-entity z-name z-function&quot;&gt;count&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-string&quot;&gt;&amp;#39;max_colors&amp;#39;&lt;&#x2F;span&gt;&lt;span&gt;))&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator&quot;&gt;;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span class=&quot;z-comment&quot;&gt;&#x2F;**&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span class=&quot;z-comment&quot;&gt; * Will output:&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span class=&quot;z-comment&quot;&gt; *     int(8)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span class=&quot;z-comment&quot;&gt; *&#x2F;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;&lt;h2 id=&quot;the-power-in-your-hand-control-the-cursor&quot;&gt;The power in your hand: Control the cursor&lt;a role=&quot;presentation&quot; class=&quot;anchor&quot; href=&quot;#the-power-in-your-hand-control-the-cursor&quot; title=&quot;Anchor link to this header&quot;&gt;#&lt;&#x2F;a&gt;
&lt;&#x2F;h2&gt;
&lt;p&gt;Let&#x27;s summarize. We are able to parse and know all the terminal
capabilities of a specific terminal (including the one of the current
user). If we would like a powerful terminal API, we need to control the
basis, like the cursor.&lt;&#x2F;p&gt;
&lt;p&gt;Remember. We said that the terminal is a canvas of columns and lines.
The cursor is like a pen. We can move it and write something. We are
going to (partly) see how the &lt;a rel=&quot;noopener external&quot; target=&quot;_blank&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;hoaproject&#x2F;Console&#x2F;blob&#x2F;master&#x2F;Source&#x2F;Cursor.php&quot;&gt;&lt;code&gt;Hoa\Console\Cursor&lt;&#x2F;code&gt;
class&lt;&#x2F;a&gt;
works.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;i-like-to-move-it&quot;&gt;I like to move it!&lt;a role=&quot;presentation&quot; class=&quot;anchor&quot; href=&quot;#i-like-to-move-it&quot; title=&quot;Anchor link to this header&quot;&gt;#&lt;&#x2F;a&gt;
&lt;&#x2F;h3&gt;
&lt;p&gt;The &lt;code&gt;moveTo&lt;&#x2F;code&gt; static method allows to move the cursor to an absolute
position. For example:&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo z-code&quot;&gt;&lt;code data-lang=&quot;php&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span class=&quot;z-keyword z-operator&quot;&gt;&amp;lt;?&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-other&quot;&gt;php&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;Hoa&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator&quot;&gt;\&lt;&#x2F;span&gt;&lt;span&gt;Console&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator&quot;&gt;\&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-class&quot;&gt;Cursor&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-entity z-name z-function&quot;&gt;moveTo&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable&quot;&gt;$x&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator&quot;&gt;,&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable&quot;&gt; $y&lt;&#x2F;span&gt;&lt;span&gt;)&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator&quot;&gt;;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;The control function we use is &lt;code&gt;cursor_address&lt;&#x2F;code&gt;. So all we need to do is
to use the &lt;code&gt;Hoa\Console\Tput&lt;&#x2F;code&gt; class and call the &lt;code&gt;get&lt;&#x2F;code&gt; method on it to
get the value of this string capability. This is a parameterized one: On
&lt;code&gt;xterm-256color&lt;&#x2F;code&gt;, its value is &lt;code&gt;e[%i%p1%d;%p2%dH&lt;&#x2F;code&gt;. We replace the
parameters by &lt;code&gt;$x&lt;&#x2F;code&gt; and &lt;code&gt;$y&lt;&#x2F;code&gt; and we output the result. That&#x27;s all! We are
able to move the cursor on an absolute position on &lt;strong&gt;all terminals&lt;&#x2F;strong&gt;!
This is the right way to do.&lt;&#x2F;p&gt;
&lt;p&gt;We use the same strategy for the &lt;code&gt;move&lt;&#x2F;code&gt; static method that moves the
cursor relatively to its current position. For example:&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo z-code&quot;&gt;&lt;code data-lang=&quot;php&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span class=&quot;z-keyword z-operator&quot;&gt;&amp;lt;?&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-other&quot;&gt;php&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;Hoa&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator&quot;&gt;\&lt;&#x2F;span&gt;&lt;span&gt;Console&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator&quot;&gt;\&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-class&quot;&gt;Cursor&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-entity z-name z-function&quot;&gt;move&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-string&quot;&gt;&amp;#39;right up&amp;#39;&lt;&#x2F;span&gt;&lt;span&gt;)&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator&quot;&gt;;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;We split the steps and for each step we read the appropriated string
capability using the &lt;code&gt;Hoa\Console\Tput&lt;&#x2F;code&gt; class. For &lt;code&gt;right&lt;&#x2F;code&gt;, we read the
&lt;code&gt;parm_right_cursor&lt;&#x2F;code&gt; string capability, for &lt;code&gt;up&lt;&#x2F;code&gt;, we read
&lt;code&gt;parm_up_cursor&lt;&#x2F;code&gt; etc. Note that &lt;code&gt;parm_right_cursor&lt;&#x2F;code&gt; is different of
&lt;code&gt;cursor_right&lt;&#x2F;code&gt;: The first one is used to move the cursor a certain
number of times while the second one is used to move the cursor only one
time. With performances in mind, we should use the first one if we have
to move the cursor several times.&lt;&#x2F;p&gt;
&lt;p&gt;The &lt;code&gt;getPosition&lt;&#x2F;code&gt; static method returns the position of the cursor. This
way to interact is a little bit different. We must write a control
function on the output, and then, the terminal replies on the input.
&lt;a rel=&quot;noopener external&quot; target=&quot;_blank&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;hoaproject&#x2F;Console&#x2F;blob&#x2F;master&#x2F;Source&#x2F;Cursor.php&quot;&gt;See the implementation by
yourself&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo z-code&quot;&gt;&lt;code data-lang=&quot;php&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span class=&quot;z-keyword z-operator&quot;&gt;&amp;lt;?&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-other&quot;&gt;php&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span class=&quot;z-support z-function&quot;&gt;print_r&lt;&#x2F;span&gt;&lt;span&gt;(Hoa&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator&quot;&gt;\&lt;&#x2F;span&gt;&lt;span&gt;Console&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator&quot;&gt;\&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-class&quot;&gt;Cursor&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-entity z-name z-function&quot;&gt;getPosition&lt;&#x2F;span&gt;&lt;span&gt;())&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator&quot;&gt;;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span class=&quot;z-comment&quot;&gt;&#x2F;**&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span class=&quot;z-comment&quot;&gt; * Will output:&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span class=&quot;z-comment&quot;&gt; *     Array&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span class=&quot;z-comment&quot;&gt; *     (&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span class=&quot;z-comment&quot;&gt; *         [x] =&amp;gt; 7&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span class=&quot;z-comment&quot;&gt; *         [y] =&amp;gt; 42&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span class=&quot;z-comment&quot;&gt; *     )&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span class=&quot;z-comment&quot;&gt; *&#x2F;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;In the same way, we have the &lt;code&gt;save&lt;&#x2F;code&gt; and &lt;code&gt;restore&lt;&#x2F;code&gt; static methods that
save the current position of the cursor and restore it. This is very
useful. We use the &lt;code&gt;save_cursor&lt;&#x2F;code&gt; and &lt;code&gt;restore_cursor&lt;&#x2F;code&gt; string
capabilities.&lt;&#x2F;p&gt;
&lt;p&gt;Also, the &lt;code&gt;clear&lt;&#x2F;code&gt; static method splits some parts to clear. For each
part (direction or way), we read from &lt;code&gt;Hoa\Console\Tput&lt;&#x2F;code&gt; the
appropriated string capabilities: &lt;code&gt;clear_screen&lt;&#x2F;code&gt; to clear all the
screen, &lt;code&gt;clr_eol&lt;&#x2F;code&gt; to clear everything on the right of the cursor,
&lt;code&gt;clr_eos&lt;&#x2F;code&gt; to clear everything bellow the cursor etc.&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo z-code&quot;&gt;&lt;code data-lang=&quot;php&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span class=&quot;z-keyword z-operator&quot;&gt;&amp;lt;?&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-other&quot;&gt;php&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;Hoa&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator&quot;&gt;\&lt;&#x2F;span&gt;&lt;span&gt;Console&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator&quot;&gt;\&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-class&quot;&gt;Cursor&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-entity z-name z-function&quot;&gt;clear&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-string&quot;&gt;&amp;#39;left&amp;#39;&lt;&#x2F;span&gt;&lt;span&gt;)&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator&quot;&gt;;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;See what we learnt in action:&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo z-code&quot;&gt;&lt;code data-lang=&quot;php&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span class=&quot;z-keyword z-operator&quot;&gt;&amp;lt;?&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-other&quot;&gt;php&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span class=&quot;z-support z-function&quot;&gt;echo&lt;&#x2F;span&gt;&lt;span class=&quot;z-string&quot;&gt; &amp;#39;Foobar&amp;#39;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator&quot;&gt;,&lt;&#x2F;span&gt;&lt;span class=&quot;z-string&quot;&gt; &amp;quot;&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-character&quot;&gt;\n&lt;&#x2F;span&gt;&lt;span class=&quot;z-string&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator&quot;&gt;,&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span class=&quot;z-string&quot;&gt;     &amp;#39;Foobar&amp;#39;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator&quot;&gt;,&lt;&#x2F;span&gt;&lt;span class=&quot;z-string&quot;&gt; &amp;quot;&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-character&quot;&gt;\n&lt;&#x2F;span&gt;&lt;span class=&quot;z-string&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator&quot;&gt;,&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span class=&quot;z-string&quot;&gt;     &amp;#39;Foobar&amp;#39;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator&quot;&gt;,&lt;&#x2F;span&gt;&lt;span class=&quot;z-string&quot;&gt; &amp;quot;&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-character&quot;&gt;\n&lt;&#x2F;span&gt;&lt;span class=&quot;z-string&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator&quot;&gt;,&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span class=&quot;z-string&quot;&gt;     &amp;#39;Foobar&amp;#39;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator&quot;&gt;,&lt;&#x2F;span&gt;&lt;span class=&quot;z-string&quot;&gt; &amp;quot;&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-character&quot;&gt;\n&lt;&#x2F;span&gt;&lt;span class=&quot;z-string&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator&quot;&gt;,&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span class=&quot;z-string&quot;&gt;     &amp;#39;Foobar&amp;#39;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator&quot;&gt;,&lt;&#x2F;span&gt;&lt;span class=&quot;z-string&quot;&gt; &amp;quot;&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-character&quot;&gt;\n&lt;&#x2F;span&gt;&lt;span class=&quot;z-string&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator&quot;&gt;;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;           Hoa&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator&quot;&gt;\&lt;&#x2F;span&gt;&lt;span&gt;Console&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator&quot;&gt;\&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-class&quot;&gt;Cursor&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-entity z-name z-function&quot;&gt;save&lt;&#x2F;span&gt;&lt;span&gt;()&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator&quot;&gt;;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span class=&quot;z-support z-function&quot;&gt;sleep&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-numeric&quot;&gt;1&lt;&#x2F;span&gt;&lt;span&gt;)&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator&quot;&gt;;&lt;&#x2F;span&gt;&lt;span&gt;  Hoa&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator&quot;&gt;\&lt;&#x2F;span&gt;&lt;span&gt;Console&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator&quot;&gt;\&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-class&quot;&gt;Cursor&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-entity z-name z-function&quot;&gt;move&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-string&quot;&gt;&amp;#39;LEFT&amp;#39;&lt;&#x2F;span&gt;&lt;span&gt;)&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator&quot;&gt;;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span class=&quot;z-support z-function&quot;&gt;sleep&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-numeric&quot;&gt;1&lt;&#x2F;span&gt;&lt;span&gt;)&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator&quot;&gt;;&lt;&#x2F;span&gt;&lt;span&gt;  Hoa&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator&quot;&gt;\&lt;&#x2F;span&gt;&lt;span&gt;Console&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator&quot;&gt;\&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-class&quot;&gt;Cursor&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-entity z-name z-function&quot;&gt;move&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-string&quot;&gt;&amp;#39;↑&amp;#39;&lt;&#x2F;span&gt;&lt;span&gt;)&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator&quot;&gt;;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span class=&quot;z-support z-function&quot;&gt;sleep&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-numeric&quot;&gt;1&lt;&#x2F;span&gt;&lt;span&gt;)&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator&quot;&gt;;&lt;&#x2F;span&gt;&lt;span&gt;  Hoa&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator&quot;&gt;\&lt;&#x2F;span&gt;&lt;span&gt;Console&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator&quot;&gt;\&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-class&quot;&gt;Cursor&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-entity z-name z-function&quot;&gt;move&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-string&quot;&gt;&amp;#39;↑&amp;#39;&lt;&#x2F;span&gt;&lt;span&gt;)&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator&quot;&gt;;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span class=&quot;z-support z-function&quot;&gt;sleep&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-numeric&quot;&gt;1&lt;&#x2F;span&gt;&lt;span&gt;)&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator&quot;&gt;;&lt;&#x2F;span&gt;&lt;span&gt;  Hoa&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator&quot;&gt;\&lt;&#x2F;span&gt;&lt;span&gt;Console&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator&quot;&gt;\&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-class&quot;&gt;Cursor&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-entity z-name z-function&quot;&gt;move&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-string&quot;&gt;&amp;#39;↑&amp;#39;&lt;&#x2F;span&gt;&lt;span&gt;)&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator&quot;&gt;;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span class=&quot;z-support z-function&quot;&gt;sleep&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-numeric&quot;&gt;1&lt;&#x2F;span&gt;&lt;span&gt;)&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator&quot;&gt;;&lt;&#x2F;span&gt;&lt;span&gt;  Hoa&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator&quot;&gt;\&lt;&#x2F;span&gt;&lt;span&gt;Console&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator&quot;&gt;\&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-class&quot;&gt;Cursor&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-entity z-name z-function&quot;&gt;clear&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-string&quot;&gt;&amp;#39;↔&amp;#39;&lt;&#x2F;span&gt;&lt;span&gt;)&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator&quot;&gt;;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span class=&quot;z-support z-function&quot;&gt;sleep&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-numeric&quot;&gt;1&lt;&#x2F;span&gt;&lt;span&gt;)&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator&quot;&gt;;&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-function&quot;&gt;  echo&lt;&#x2F;span&gt;&lt;span class=&quot;z-string&quot;&gt; &amp;#39;Hahaha!&amp;#39;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator&quot;&gt;;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span class=&quot;z-support z-function&quot;&gt;sleep&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-numeric&quot;&gt;1&lt;&#x2F;span&gt;&lt;span&gt;)&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator&quot;&gt;;&lt;&#x2F;span&gt;&lt;span&gt;  Hoa&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator&quot;&gt;\&lt;&#x2F;span&gt;&lt;span&gt;Console&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator&quot;&gt;\&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-class&quot;&gt;Cursor&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-entity z-name z-function&quot;&gt;restore&lt;&#x2F;span&gt;&lt;span&gt;()&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator&quot;&gt;;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span class=&quot;z-support z-function&quot;&gt;echo&lt;&#x2F;span&gt;&lt;span class=&quot;z-string&quot;&gt; &amp;quot;&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-character&quot;&gt;\n&lt;&#x2F;span&gt;&lt;span class=&quot;z-string&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator&quot;&gt;,&lt;&#x2F;span&gt;&lt;span class=&quot;z-string&quot;&gt; &amp;#39;Bye!&amp;#39;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator&quot;&gt;,&lt;&#x2F;span&gt;&lt;span class=&quot;z-string&quot;&gt; &amp;quot;&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-character&quot;&gt;\n&lt;&#x2F;span&gt;&lt;span class=&quot;z-string&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator&quot;&gt;;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;The result is presented in the following figure.&lt;&#x2F;p&gt;
&lt;figure&gt;
&lt;p&gt;&lt;img src=&quot;https:&#x2F;&#x2F;mnt.io&#x2F;articles&#x2F;control-the-terminal-the-right-way&#x2F;.&#x2F;cursor_move.gif&quot; alt=&quot;Moving a cursor in the terminal&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
  &lt;figcaption&gt;
&lt;p&gt;Saving, moving, clearing and restoring the cursor with &lt;code&gt;Hoa\Console&lt;&#x2F;code&gt;.&lt;&#x2F;p&gt;
  &lt;&#x2F;figcaption&gt;
&lt;&#x2F;figure&gt;
&lt;p&gt;The resulting API is portable, clean, simple to read and very easy to
maintain! This is the right way to do.&lt;&#x2F;p&gt;
&lt;p&gt;To get more information, please &lt;a rel=&quot;noopener external&quot; target=&quot;_blank&quot; title=&quot;Documentation of Hoa\Console\Cursor&quot; href=&quot;http:&#x2F;&#x2F;hoa-project.net&#x2F;Literature&#x2F;Hack&#x2F;Console.html#Cursor&quot;&gt;read the
documentation&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;&quot;&gt;Colours and decorations&lt;a role=&quot;presentation&quot; class=&quot;anchor&quot; href=&quot;#&quot; title=&quot;Anchor link to this header&quot;&gt;#&lt;&#x2F;a&gt;
&lt;&#x2F;h3&gt;
&lt;p&gt;Now: Colours. This is mainly the reason why I decided to write this
article. We see the same and the same libraries, again and again, doing
only colours in the terminal, but unfortunately not in the right way 😞.&lt;&#x2F;p&gt;
&lt;p&gt;A terminal has a palette of colours. Each colour is indexed by an
integer, from 0 to potentially +∞ . The size of the palette is described
by the &lt;code&gt;max_colors&lt;&#x2F;code&gt; number capability. Usually, a palette contains 1, 2,
8, 256 or 16 million colours.&lt;&#x2F;p&gt;
&lt;figure&gt;
&lt;p&gt;&lt;img src=&quot;https:&#x2F;&#x2F;mnt.io&#x2F;articles&#x2F;control-the-terminal-the-right-way&#x2F;.&#x2F;xterm_256color_chart.svg&quot; alt=&quot;&lt;code&gt;xterm-256color&lt;&#x2F;code&gt; palette&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
  &lt;figcaption&gt;
&lt;p&gt;The &lt;code&gt;xterm-256color&lt;&#x2F;code&gt; palette (&lt;a rel=&quot;noopener external&quot; target=&quot;_blank&quot; title=&quot;Source of the `xterm-256color` palette&quot; href=&quot;https:&#x2F;&#x2F;commons.wikimedia.org&#x2F;wiki&#x2F;File:Xterm_256color_chart.svg&quot;&gt;source&lt;&#x2F;a&gt;).&lt;&#x2F;p&gt;
  &lt;&#x2F;figcaption&gt;
&lt;&#x2F;figure&gt;
&lt;p&gt;So first thing to do is to check whether we have more than 1 colour. If
not, we must not colorize the given text. Next, if we have less than
256 colours, we have to convert the style into a palette containing
8 colours. Same with less than 16 million colours, we have to convert
into 256 colours.&lt;&#x2F;p&gt;
&lt;p&gt;Moreover, we can define the style of the foreground or of the background
with respectively the &lt;code&gt;set_a_foreground&lt;&#x2F;code&gt; and &lt;code&gt;set_a_background&lt;&#x2F;code&gt; string
capabilities. Finally, in addition to colours, we can define other
decorations like bold, underline, blink or even inverse the foreground
and the background colours.&lt;&#x2F;p&gt;
&lt;p&gt;One thing to remember is: With this capability, we only define the style
at a given “pixel” and it will apply on the following text. In this
case, it is not exactly like HTML where we have a beginning and an end.
Here we only have a beginning. Let&amp;#39;s try!&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo z-code&quot;&gt;&lt;code data-lang=&quot;php&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span class=&quot;z-keyword z-operator&quot;&gt;&amp;lt;?&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-other&quot;&gt;php&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;Hoa&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator&quot;&gt;\&lt;&#x2F;span&gt;&lt;span&gt;Console&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator&quot;&gt;\&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-class&quot;&gt;Cursor&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-entity z-name z-function&quot;&gt;colorize&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-string&quot;&gt;&amp;#39;underlined foreground(yellow) background(#932e2e)&amp;#39;&lt;&#x2F;span&gt;&lt;span&gt;)&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator&quot;&gt;;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span class=&quot;z-support z-function&quot;&gt;echo&lt;&#x2F;span&gt;&lt;span class=&quot;z-string&quot;&gt; &amp;#39;foo&amp;#39;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator&quot;&gt;;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;Hoa&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator&quot;&gt;\&lt;&#x2F;span&gt;&lt;span&gt;Console&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator&quot;&gt;\&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-class&quot;&gt;Cursor&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-entity z-name z-function&quot;&gt;colorize&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-string&quot;&gt;&amp;#39;!underlined background(normal)&amp;#39;&lt;&#x2F;span&gt;&lt;span&gt;)&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator&quot;&gt;;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span class=&quot;z-support z-function&quot;&gt;echo&lt;&#x2F;span&gt;&lt;span class=&quot;z-string&quot;&gt; &amp;#39;bar&amp;#39;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator&quot;&gt;,&lt;&#x2F;span&gt;&lt;span class=&quot;z-string&quot;&gt; &amp;quot;&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-character&quot;&gt;\n&lt;&#x2F;span&gt;&lt;span class=&quot;z-string&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator&quot;&gt;;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;The API is pretty simple: We start to underline the text, we set the
foreground to yellow and we set the background to &lt;code&gt;#932e2e&lt;&#x2F;code&gt;  . Then we
output something. We continue with cancelling the underline decoration
in addition to resetting the background. Finally we output something
else. Here is the result:&lt;&#x2F;p&gt;
&lt;figure&gt;
&lt;p&gt;&lt;img src=&quot;https:&#x2F;&#x2F;mnt.io&#x2F;articles&#x2F;control-the-terminal-the-right-way&#x2F;.&#x2F;colour.png&quot; alt=&quot;A styled text in the terminal&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
  &lt;figcaption&gt;
&lt;p&gt;Fun with &lt;code&gt;Hoa\Console\Cursor::colorize&lt;&#x2F;code&gt;.&lt;&#x2F;p&gt;
  &lt;&#x2F;figcaption&gt;
&lt;&#x2F;figure&gt;
&lt;p&gt;What do we observe? My terminal does not support more than 256 colours.
Thus, &lt;code&gt;#932e2e&lt;&#x2F;code&gt; is &lt;strong&gt;automatically converted into the closest colour&lt;&#x2F;strong&gt;
in my actual palette! This is the right way to do.&lt;&#x2F;p&gt;
&lt;p&gt;For fun, you can change the colours in the palette with the
&lt;code&gt;Hoa\Console\Cursor::changeColor&lt;&#x2F;code&gt; static method. You can also change the
style of the cursor, like &lt;code&gt;▋&lt;&#x2F;code&gt;, &lt;code&gt;_&lt;&#x2F;code&gt; or &lt;code&gt;|&lt;&#x2F;code&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;To get more information, please &lt;a rel=&quot;noopener external&quot; target=&quot;_blank&quot; title=&quot;Documentation of Hoa\Console\Cursor&quot; href=&quot;http:&#x2F;&#x2F;hoa-project.net&#x2F;Fr&#x2F;Literature&#x2F;Hack&#x2F;Console.html#Content&quot;&gt;read the
documentation&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;-1&quot;&gt;The power in your hand: Readline&lt;a role=&quot;presentation&quot; class=&quot;anchor&quot; href=&quot;#-1&quot; title=&quot;Anchor link to this header&quot;&gt;#&lt;&#x2F;a&gt;
&lt;&#x2F;h2&gt;
&lt;p&gt;A more complete usage of &lt;code&gt;Hoa\Console\Cursor&lt;&#x2F;code&gt; and even
&lt;code&gt;Hoa\Console\Window&lt;&#x2F;code&gt; is the &lt;a rel=&quot;noopener external&quot; target=&quot;_blank&quot; href=&quot;http:&#x2F;&#x2F;central.hoa-project.net&#x2F;Resource&#x2F;Library&#x2F;Console&#x2F;Readline&#x2F;Readline.php&quot;&gt;&lt;code&gt;Hoa\Console\Readline&lt;&#x2F;code&gt;
class&lt;&#x2F;a&gt;
that is a powerful readline. More than autocompleters, history, key
bindings etc., it has an advanced use of cursors. See this in action:&lt;&#x2F;p&gt;
&lt;figure&gt;
&lt;p&gt;&lt;img src=&quot;https:&#x2F;&#x2F;mnt.io&#x2F;articles&#x2F;control-the-terminal-the-right-way&#x2F;.&#x2F;readline_autocompleters.gif&quot; alt=&quot;Play with autocompleters&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
  &lt;figcaption&gt;
&lt;p&gt;An autocompletion menu, made with &lt;code&gt;Hoa\Console\Cursor&lt;&#x2F;code&gt; and
&lt;code&gt;Hoa\Console\Window&lt;&#x2F;code&gt;.&lt;&#x2F;p&gt;
  &lt;&#x2F;figcaption&gt;
&lt;&#x2F;figure&gt;
&lt;p&gt;We use &lt;code&gt;Hoa\Console\Cursor&lt;&#x2F;code&gt; to move the cursor or change the colours and
&lt;code&gt;Hoa\Console\Window&lt;&#x2F;code&gt; to get the dimensions of the window, scroll some
text in it etc. I encourage you to read the implementation.&lt;&#x2F;p&gt;
&lt;p&gt;To get more information, please &lt;a rel=&quot;noopener external&quot; target=&quot;_blank&quot; title=&quot;Documentation of Hoa\Console\Readline&quot; href=&quot;http:&#x2F;&#x2F;hoa-project.net&#x2F;Literature&#x2F;Hack&#x2F;Console.html#Readline&quot;&gt;read the
documentation&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;-2&quot;&gt;The power in your hand: Sound 🎵&lt;a role=&quot;presentation&quot; class=&quot;anchor&quot; href=&quot;#-2&quot; title=&quot;Anchor link to this header&quot;&gt;#&lt;&#x2F;a&gt;
&lt;&#x2F;h2&gt;
&lt;p&gt;Yes, even sound is defined by terminal capabilities. The famous bip is
given by the &lt;code&gt;bell&lt;&#x2F;code&gt; string capability. You would like to make a bip?
Easy:&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo z-code&quot;&gt;&lt;code data-lang=&quot;php&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span class=&quot;z-keyword z-operator&quot;&gt;&amp;lt;?&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-other&quot;&gt;php&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span class=&quot;z-variable&quot;&gt;$tput&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator&quot;&gt; =&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword&quot;&gt; new&lt;&#x2F;span&gt;&lt;span&gt; Hoa&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator&quot;&gt;\&lt;&#x2F;span&gt;&lt;span&gt;Console&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator&quot;&gt;\&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-class&quot;&gt;Tput&lt;&#x2F;span&gt;&lt;span&gt;()&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator&quot;&gt;;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span class=&quot;z-support z-function&quot;&gt;echo&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable&quot;&gt; $tput&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator&quot;&gt;-&amp;gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-entity z-name z-function&quot;&gt;get&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-string&quot;&gt;&amp;#39;bell&amp;#39;&lt;&#x2F;span&gt;&lt;span&gt;)&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator&quot;&gt;;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;That&amp;#39;s it!&lt;&#x2F;p&gt;
&lt;h2 id=&quot;-3&quot;&gt;Bonus: Window&lt;a role=&quot;presentation&quot; class=&quot;anchor&quot; href=&quot;#-3&quot; title=&quot;Anchor link to this header&quot;&gt;#&lt;&#x2F;a&gt;
&lt;&#x2F;h2&gt;
&lt;p&gt;As a bonus, a quick demo of &lt;code&gt;Hoa\Console\Window&lt;&#x2F;code&gt; because it&amp;#39;s fun.&lt;&#x2F;p&gt;
&lt;p&gt;The video shows the execution of the following code:&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo z-code&quot;&gt;&lt;code data-lang=&quot;php&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span class=&quot;z-keyword z-operator&quot;&gt;&amp;lt;?&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-other&quot;&gt;php&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;Hoa&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator&quot;&gt;\&lt;&#x2F;span&gt;&lt;span&gt;Console&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator&quot;&gt;\&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-class&quot;&gt;Window&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-entity z-name z-function&quot;&gt;setSize&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-numeric&quot;&gt;80&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator&quot;&gt;,&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-numeric&quot;&gt; 35&lt;&#x2F;span&gt;&lt;span&gt;)&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator&quot;&gt;;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span class=&quot;z-support z-function&quot;&gt;var_dump&lt;&#x2F;span&gt;&lt;span&gt;(Hoa&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator&quot;&gt;\&lt;&#x2F;span&gt;&lt;span&gt;Console&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator&quot;&gt;\&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-class&quot;&gt;Window&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-entity z-name z-function&quot;&gt;getPosition&lt;&#x2F;span&gt;&lt;span&gt;())&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator&quot;&gt;;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span class=&quot;z-keyword&quot;&gt;foreach&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span class=&quot;z-punctuation z-section&quot;&gt;    [&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span class=&quot;z-punctuation z-section&quot;&gt;        [&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-numeric&quot;&gt;100&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator&quot;&gt;,&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-numeric&quot;&gt; 100&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section&quot;&gt;]&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator&quot;&gt;,&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section&quot;&gt; [&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-numeric&quot;&gt;150&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator&quot;&gt;,&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-numeric&quot;&gt; 150&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section&quot;&gt;]&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator&quot;&gt;,&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section&quot;&gt; [&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-numeric&quot;&gt;200&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator&quot;&gt;,&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-numeric&quot;&gt; 100&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section&quot;&gt;]&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator&quot;&gt;,&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section&quot;&gt; [&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-numeric&quot;&gt;200&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator&quot;&gt;,&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-numeric&quot;&gt; 80&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section&quot;&gt;]&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator&quot;&gt;,&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span class=&quot;z-punctuation z-section&quot;&gt;        [&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-numeric&quot;&gt;200&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator&quot;&gt;,&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-numeric&quot;&gt;  60&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section&quot;&gt;]&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator&quot;&gt;,&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section&quot;&gt; [&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-numeric&quot;&gt;200&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator&quot;&gt;,&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-numeric&quot;&gt; 100&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section&quot;&gt;]&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span class=&quot;z-punctuation z-section&quot;&gt;    ]&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span class=&quot;z-keyword z-operator&quot;&gt;    as&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-function&quot;&gt; list&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable&quot;&gt;$x&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator&quot;&gt;,&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable&quot;&gt; $y&lt;&#x2F;span&gt;&lt;span&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;) {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span class=&quot;z-support z-function&quot;&gt;    sleep&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-numeric&quot;&gt;1&lt;&#x2F;span&gt;&lt;span&gt;)&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator&quot;&gt;;&lt;&#x2F;span&gt;&lt;span&gt;  Hoa&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator&quot;&gt;\&lt;&#x2F;span&gt;&lt;span&gt;Console&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator&quot;&gt;\&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-class&quot;&gt;Window&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-entity z-name z-function&quot;&gt;moveTo&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable&quot;&gt;$x&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator&quot;&gt;,&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable&quot;&gt; $y&lt;&#x2F;span&gt;&lt;span&gt;)&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator&quot;&gt;;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span class=&quot;z-support z-function&quot;&gt;sleep&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-numeric&quot;&gt;2&lt;&#x2F;span&gt;&lt;span&gt;)&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator&quot;&gt;;&lt;&#x2F;span&gt;&lt;span&gt;  Hoa&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator&quot;&gt;\&lt;&#x2F;span&gt;&lt;span&gt;Console&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator&quot;&gt;\&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-class&quot;&gt;Window&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-entity z-name z-function&quot;&gt;minimize&lt;&#x2F;span&gt;&lt;span&gt;()&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator&quot;&gt;;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span class=&quot;z-support z-function&quot;&gt;sleep&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-numeric&quot;&gt;2&lt;&#x2F;span&gt;&lt;span&gt;)&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator&quot;&gt;;&lt;&#x2F;span&gt;&lt;span&gt;  Hoa&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator&quot;&gt;\&lt;&#x2F;span&gt;&lt;span&gt;Console&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator&quot;&gt;\&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-class&quot;&gt;Window&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-entity z-name z-function&quot;&gt;restore&lt;&#x2F;span&gt;&lt;span&gt;()&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator&quot;&gt;;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span class=&quot;z-support z-function&quot;&gt;sleep&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-numeric&quot;&gt;2&lt;&#x2F;span&gt;&lt;span&gt;)&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator&quot;&gt;;&lt;&#x2F;span&gt;&lt;span&gt;  Hoa&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator&quot;&gt;\&lt;&#x2F;span&gt;&lt;span&gt;Console&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator&quot;&gt;\&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-class&quot;&gt;Window&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-entity z-name z-function&quot;&gt;lower&lt;&#x2F;span&gt;&lt;span&gt;()&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator&quot;&gt;;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span class=&quot;z-support z-function&quot;&gt;sleep&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-numeric&quot;&gt;2&lt;&#x2F;span&gt;&lt;span&gt;)&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator&quot;&gt;;&lt;&#x2F;span&gt;&lt;span&gt;  Hoa&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator&quot;&gt;\&lt;&#x2F;span&gt;&lt;span&gt;Console&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator&quot;&gt;\&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-class&quot;&gt;Window&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator&quot;&gt;::&lt;&#x2F;span&gt;&lt;span class=&quot;z-entity z-name z-function&quot;&gt;raise&lt;&#x2F;span&gt;&lt;span&gt;()&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator&quot;&gt;;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;We resize the window, we get its position, we move the window on the
screen, we minimize and restore it, and finally we put it behind all
other windows just before raising it.&lt;&#x2F;p&gt;
&lt;iframe src=&quot;https:&#x2F;&#x2F;player.vimeo.com&#x2F;video&#x2F;115901611?title=0&amp;amp;byline=0&amp;amp;portrait=0&amp;amp;badge=0&amp;amp;autopause=0&amp;amp;player_id=0&amp;amp;app_id=58479&quot; frameborder=&quot;0&quot; allow=&quot;autoplay; fullscreen; picture-in-picture; clipboard-write&quot; style=&quot;aspect-ratio: 16&#x2F;9; width: 100%;&quot; title=&quot;Hoa\Console\Window in action&quot;&gt;
&lt;&#x2F;iframe&gt;
&lt;p&gt;To get more information, please &lt;a rel=&quot;noopener external&quot; target=&quot;_blank&quot; title=&quot;Documentation of Hoa\Console\Window&quot; href=&quot;http:&#x2F;&#x2F;hoa-project.net&#x2F;Literature&#x2F;Hack&#x2F;Console.html#Window&quot;&gt;read the
documentation&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;-4&quot;&gt;Conclusion&lt;a role=&quot;presentation&quot; class=&quot;anchor&quot; href=&quot;#-4&quot; title=&quot;Anchor link to this header&quot;&gt;#&lt;&#x2F;a&gt;
&lt;&#x2F;h2&gt;
&lt;p&gt;In this article, we saw how to control the terminal by: Firstly,
detecting the type of pipes, and secondly, reading and using the
terminal capabilities. We know where these capabilities are stored and
we saw few of them in action.&lt;&#x2F;p&gt;
&lt;p&gt;This approach ensures your code will be &lt;strong&gt;portable&lt;&#x2F;strong&gt;, easy to maintain
and &lt;strong&gt;easy to use&lt;&#x2F;strong&gt;. The portability is very important because, like
browsers and user devices, we have a lot of terminal emulators released
in the wild. We have to care about them.&lt;&#x2F;p&gt;
&lt;p&gt;I encourage you to take a look at the &lt;a rel=&quot;noopener external&quot; target=&quot;_blank&quot; href=&quot;http:&#x2F;&#x2F;github.com&#x2F;hoaproject&#x2F;Console&quot;&gt;&lt;code&gt;Hoa\Console&lt;&#x2F;code&gt;
library&lt;&#x2F;a&gt; and to contribute to make
it even more awesome 😄.&lt;&#x2F;p&gt;
</content>
        
    </entry>
</feed>
