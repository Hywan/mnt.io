<!doctype html>
<html lang="en">
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta http-equiv="content-security-policy" content="default-src 'self'; child-src 'self' https://www.youtube-nocookie.com; script-src 'self' 'unsafe-inline' 'wasm-unsafe-eval'; style-src 'self' 'unsafe-inline'; img-src 'self' data:">
  <meta name="viewport" content="width=device-width, minimum-scale=1">

  <title>Random thoughts about `::class` in PHP</title>

  <link rel="stylesheet" href="https://mnt.io/style/min/main.css?h=6c0cd873f06c67453a4b">
  <link rel="stylesheet" href="https://mnt.io/style/min/syntax-theme.css?h=ef9797b0398b3ffe9058">
  <link rel="stylesheet" href="https://mnt.io/style/min/search.css" fetchpriority="low">

  <meta name="author" content="Ivan Enderlin">
  <meta name="description" content="I am bored of PHP. Let&#x27;s have fun with `::class`!">
  <meta name="keywords" content="php">
  <meta property="og:title" content="Random thoughts about `::class` in PHP">
  <meta property="og:site_name" content="mnt.io">
  <meta property="og:locale" content="en_GB">
  <meta property="og:type" content="article">
  <meta property="og:url" content="https://mnt.io/articles/random-thoughts-about-class-in-php/">
  <meta property="og:image" content="https://mnt.io/image/site-poster.jpg">
  <meta name="fediverse:creator" content="@hywan@floss.social">

  <script defer src="https://mnt.io/search/pagefind-ui.js" fetchpriority="low"></script>
</head>
<body class="content-grid">

<nav id="menu" class="full-width content-grid">
  <ul>
    <li><a href="/" accesskey="h">Home</a></li>
    <li><a href="https://mnt.io/articles/" accesskey="a">Articles</a></li>
    <li><a href="https://mnt.io/series/" accesskey="s">Series</a></li>
    <li><a href="https://matrix.to/#/&#x23;mnt_io:matrix.org" title="Public Matrix room to discuss about this blog's content" target="_blank" accesskey="d">Discuss</a></li>
    <li>
      <a href="javascript:document.getElementById('search').showModal()" accesskey="k">
        <svg viewBox="0 0 500 500" class="icon">
          <description>Search</description>
          <circle r="180" cx="210" cy="210" fill="none" stroke="currentColor" stroke-width="40" />
          <line x1="340" y1="340" x2="480" y2="480" stroke="currentColor" stroke-width="40" stroke-linecap="round" />
        </svg>
      </a>
    </li>
  </ul>
</nav>

<dialog id="search" tabindex="-1" closedby="any"></dialog>

<main vocab="https://schema.org">

  <article class="article" typeof="Article" data-pagefind-body>
    <header>
      <h1 property="name" style="view-transition-name: article-title-random-thoughts-about-class-in-php">Random thoughts about <code>::class</code> in PHP</h1>

      
  <div class="metadata" data-pagefind-ignore="all">
    <time title="Published date" datetime="2018-01-24" property="datePublished">January 24, 2018</time>
    <span title="Reading time" property="timeRequired" content="PT2M">2 minutes read</span>
    
    <span title="Keywords" property="keywords" content="php">
      Keywords:&nbsp;<a href="/keywords/php">php</a></span>
    
      <span><a href="https://github.com/Hywan/mnt.io/edit/main/content/articles&#x2F;2018-01-24-random-thoughts-about-class-in-php&#x2F;index.md" title="Submit a patch for this page">Edit</a> this page</span>
      
      <meta property="description" content="I am bored of PHP. Let&#x27;s have fun with `::class`!" />
      
    
  </div>

    </header>

    <blockquote>
<p>The special <strong><code>::class</code></strong> constant allows for fully qualified class
name resolution at compile, this is useful for namespaced classes.</p>
</blockquote>
<p>I'm quoting <a rel="noopener external" target="_blank" href="http://php.net/manual/en/language.oop5.constants.php">the PHP
manual</a>. But
things can be funny sometimes. Let's go through some examples.</p>
<ul>
<li><pre class="giallo z-code"><code data-lang="php"><span class="giallo-l"><span class="z-keyword z-operator">&lt;?</span><span class="z-constant z-other">php</span></span>
<span class="giallo-l"></span>
<span class="giallo-l"><span class="z-keyword">use</span><span> A</span><span class="z-punctuation z-separator">\</span><span class="z-support z-class">B</span><span class="z-keyword"> as</span><span> C</span><span class="z-punctuation z-terminator">;</span></span>
<span class="giallo-l"></span>
<span class="giallo-l"><span class="z-variable">$_</span><span class="z-keyword z-operator"> =</span><span class="z-support z-class"> C</span><span class="z-keyword z-operator">::</span><span class="z-keyword">class</span><span class="z-punctuation z-terminator">;</span></span>
<span class="giallo-l"><span class="z-string">``` &lt;!-- rumdl-disable-line MD031 --&gt;</span></span>
<span class="giallo-l"></span>
<span class="giallo-l"><span class="z-string">resolves to `</span><span class="z-constant z-other">A</span><span>\</span><span class="z-constant z-other">B</span><span class="z-string">`, which is perfect üôÇ</span></span>
<span class="giallo-l"></span></code></pre></li>
<li><pre class="giallo z-code"><code data-lang="php"><span class="giallo-l"><span class="z-keyword z-operator">&lt;?</span><span class="z-constant z-other">php</span></span>
<span class="giallo-l"></span>
<span class="giallo-l"><span class="z-storage">class</span><span class="z-entity z-name"> C</span><span> {</span></span>
<span class="giallo-l"><span class="z-storage">    public</span><span class="z-storage z-type z-function"> function</span><span class="z-entity z-name z-function"> f</span><span>() {</span></span>
<span class="giallo-l"><span class="z-variable">        $_</span><span class="z-keyword z-operator"> =</span><span class="z-storage"> self</span><span class="z-keyword z-operator">::</span><span class="z-keyword">class</span><span class="z-punctuation z-terminator">;</span></span>
<span class="giallo-l"><span>    }</span></span>
<span class="giallo-l"><span>}</span></span></code></pre>
<p>resolves to <code>C</code>, which is perfect üòÄ</p>
</li>
<li><pre class="giallo z-code"><code data-lang="php"><span class="giallo-l"><span class="z-keyword z-operator">&lt;?</span><span class="z-constant z-other">php</span></span>
<span class="giallo-l"></span>
<span class="giallo-l"><span class="z-storage">class</span><span class="z-entity z-name"> C</span><span> {}</span></span>
<span class="giallo-l"></span>
<span class="giallo-l"><span class="z-storage">class</span><span class="z-entity z-name"> D</span><span class="z-storage"> extends</span><span class="z-entity z-other z-inherited-class"> C</span><span> {</span></span>
<span class="giallo-l"><span class="z-storage">    public</span><span class="z-storage z-type z-function"> function</span><span class="z-entity z-name z-function"> f</span><span>() {</span></span>
<span class="giallo-l"><span class="z-variable">        $_</span><span class="z-keyword z-operator"> =</span><span class="z-storage"> parent</span><span class="z-keyword z-operator">::</span><span class="z-keyword">class</span><span class="z-punctuation z-terminator">;</span></span>
<span class="giallo-l"><span>    }</span></span>
<span class="giallo-l"><span>}</span></span>
<span class="giallo-l"><span class="z-string">``` &lt;!-- rumdl-disable-line MD031 --&gt;</span></span>
<span class="giallo-l"></span>
<span class="giallo-l"><span class="z-string">resolves to `</span><span class="z-constant z-other">C</span><span class="z-string">`, which is perfect üòÑ</span></span>
<span class="giallo-l"></span></code></pre></li>
<li><pre class="giallo z-code"><code data-lang="php"><span class="giallo-l"><span class="z-keyword z-operator">&lt;?</span><span class="z-constant z-other">php</span></span>
<span class="giallo-l"></span>
<span class="giallo-l"><span class="z-storage">class</span><span class="z-entity z-name"> C</span><span> {</span></span>
<span class="giallo-l"><span class="z-storage">    public static</span><span class="z-storage z-type z-function"> function</span><span class="z-entity z-name z-function"> f</span><span>() {</span></span>
<span class="giallo-l"><span class="z-variable">        $_</span><span class="z-keyword z-operator"> =</span><span class="z-storage"> static</span><span class="z-keyword z-operator">::</span><span class="z-keyword">class</span><span class="z-punctuation z-terminator">;</span></span>
<span class="giallo-l"><span>    }</span></span>
<span class="giallo-l"><span>}</span></span>
<span class="giallo-l"></span>
<span class="giallo-l"><span class="z-storage">class</span><span class="z-entity z-name"> D</span><span class="z-storage"> extends</span><span class="z-entity z-other z-inherited-class"> C</span><span> {}</span></span>
<span class="giallo-l"></span>
<span class="giallo-l"><span class="z-support z-class">D</span><span class="z-keyword z-operator">::</span><span class="z-entity z-name z-function">f</span><span>()</span><span class="z-punctuation z-terminator">;</span></span></code></pre>
<p>resolves to <code>D</code>, which is perfect üòç</p>
</li>
<li><pre class="giallo z-code"><code data-lang="php"><span class="giallo-l"><span class="z-keyword z-operator">&lt;?</span><span class="z-constant z-other">php</span></span>
<span class="giallo-l"></span>
<span class="giallo-l"><span class="z-string">&#39;foo&#39;</span><span class="z-keyword z-operator">::</span><span class="z-keyword">class</span></span>
<span class="giallo-l"><span class="z-string">``` &lt;!-- rumdl-disable-line MD031 --&gt;</span></span>
<span class="giallo-l"></span>
<span class="giallo-l"><span class="z-string">resolves to `&#39;foo&#39;`, which is‚Ä¶ huh? ü§®</span></span>
<span class="giallo-l"></span></code></pre></li>
<li><pre class="giallo z-code"><code data-lang="php"><span class="giallo-l"><span class="z-keyword z-operator">&lt;?</span><span class="z-constant z-other">php</span></span>
<span class="giallo-l"></span>
<span class="giallo-l"><span class="z-string">&quot;foo&quot;</span><span class="z-keyword z-operator">::</span><span class="z-keyword">class</span></span></code></pre>
<p>resolves to <code>'foo'</code>, which is‚Ä¶ expected somehow üòï</p>
</li>
<li><pre class="giallo z-code"><code data-lang="php"><span class="giallo-l"><span class="z-keyword z-operator">&lt;?</span><span class="z-constant z-other">php</span></span>
<span class="giallo-l"></span>
<span class="giallo-l"><span class="z-variable">$a</span><span class="z-keyword z-operator"> =</span><span class="z-string"> &#39;oo&#39;</span><span class="z-punctuation z-terminator">;</span></span>
<span class="giallo-l"><span class="z-string">&quot;f{</span><span class="z-variable">$a</span><span class="z-string">}&quot;</span><span class="z-keyword z-operator">::</span><span class="z-keyword">class</span></span>
<span class="giallo-l"><span class="z-string">``` &lt;!-- rumdl-disable-line MD031 --&gt;</span></span>
<span class="giallo-l"></span>
<span class="giallo-l"><span class="z-string">generates a parse error üôÉ</span></span>
<span class="giallo-l"></span></code></pre></li>
<li><pre class="giallo z-code"><code data-lang="php"><span class="giallo-l"><span class="z-keyword z-operator">&lt;?</span><span class="z-constant z-other">php</span></span>
<span class="giallo-l"></span>
<span class="giallo-l"><span class="z-support z-class">PHP_VERSION</span><span class="z-keyword z-operator">::</span><span class="z-keyword">class</span></span></code></pre>
<p>resolves to <code>'PHP_VERSION'</code>, which is‚Ä¶ strange: It resolves to the
fully qualified name of the constant, not the <em>class</em> ü§ê</p>
</li>
</ul>
<p><code>::class</code> is very useful to get rid of of the <code>get_class</code> or the
<code>get_called_class</code> functions, or even the <code>get_class($this)</code> trick. This
is something truly useful in PHP where entities are referenced as
strings, not as symbols. <code>::class</code> on constants makes sense, but the
name is no longer relevant. And finally, <code>::class</code> on single quote
strings is absolutely useless; on double quotes strings it is a source
of error because the value can be dynamic (and remember, <code>::class</code> is
resolved at compile time, not at run time).</p>


    <nav class="previous-next-articles"><a href="https:&#x2F;&#x2F;mnt.io&#x2F;articles&#x2F;automattic-grand-meetup-2017&#x2F;" class="button text-align-start" style="view-transition-name: article-title-automattic-grand-meetup-2017">‚ùÆ&nbsp;Automattic, Grand Meetup 2017</a><a href="https:&#x2F;&#x2F;mnt.io&#x2F;articles&#x2F;one-conference-per-day-for-one-year-2017&#x2F;" class="button text-align-end" style="view-transition-name: article-title-one-conference-per-day-for-one-year-2017">One conference per day, for one year (2017)&nbsp;‚ùØ</a></nav>
  </article>

</main>

<footer class="full-width content-grid">
  <div class="footer">
    <div>
      <h2>Contact me</h2>

      <ul>
        <li><a href="https://matrix.to/#/@mnt_io:matrix.org" title="Say hi on Matrix">@mnt_io:matrix.org</a></li>
        <li><a href="mailto:ivan@mnt.io" title="Good ol' email">ivan@mnt.io</a></li>
        <li><a href="https://floss.social/@hywan" title="Say hi on Mastodon" rel="me">Mastodon</a></li>
        <li><a href="https://github.com/Hywan" title="Say hi on Github">Github</a></li>
      </ul>
    </div>
    <div>
      <h2>Recommendations</h2>

      <ul>
        <li><a href="https://fasterthanli.me/">fasterthanli.me</a></li>
        <li><a href="https://without.boats/blog/">without.boats</a></li>
        <li><a href="https://faultlore.com/blah/">faultlore</a></li>
        <li><a href="https://smallcultfollowing.com/babysteps/blog/">smallcultfollowing</a></li>
        <li><a href="https://orlp.net/blog/">orlp</a></li>
        <li><a href="https://blog.m-ou.se/">m-ou.se</a></li>
        <li><a href="https://nadrieril.github.io/">nadrieril</a></li>
      </ul>
    </div>

    <div>
      <h2>More</h2>

      <ul>
        <li><a href="https://mnt.io/lore/">Lore</a></li>
        <li><a href="https://mnt.io/rss.xml">RSS</a></li>
        <li><a href="https://mnt.io/atom.xml">Atom</a></li>
        <li><a href="https://github.com/Hywan/mnt.io" title="Source code of this site">Source code</a></li>
        <li><a href="https://dblp.org/search/index.php?query=Ivan%20Enderlin" title="Computer Science Bibliography">DBLP</a></li>
      </ul>
    </div>
  </div>
</footer>

<script>
  window.addEventListener('DOMContentLoaded', (_event) => {
    new PagefindUI({
      element: "#search",
      resetStyles: false,
      showSubResults: true,
      showImages: false,
    });
  });
</script>
</body>
</html>
