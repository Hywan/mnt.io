<!doctype html>
<html lang="en">
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />
  <meta http-equiv="content-security-policy" content="default-src 'self'; child-src 'self' https://www.youtube-nocookie.com; script-src 'self' https://cloud.umami.is">
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <title>atoum supports TeamCity</title>

  <link rel="stylesheet" href="https://mnt.io/style/min/main.css?h=07499e1a541446a085e6" />
  <link rel="stylesheet" href="https://mnt.io/style/min/syntax-theme.css?h=ef9797b0398b3ffe9058" />

  <meta name="author" content="Ivan Enderlin" />
  <meta name="description" content="[atoum](http:&#x2F;&#x2F;atoum.org) gains a new extension: `atoum&#x2F;teamcity-extension` to get full integration with [TeamCity](https:&#x2F;&#x2F;www.jetbrains.com&#x2F;teamcity&#x2F;)!" />
  <meta name="keywords" content="test, atoum" />
  <meta property="og:title" content="atoum supports TeamCity" />
  <meta property="og:site_name" content="mnt.io" />
  <meta property="og:locale" content="en_GB" />
  <meta property="og:type" content="article" />
  <meta property="og:url" content="https://mnt.io/articles/atoum-supports-teamcity/" />
  <meta property="og:image" content="https://mnt.io/image/site-poster.jpg">
  <meta name="fediverse:creator" content="@hywan@floss.social" />
</head>
<body class="content-grid">

<nav id="menu" class="full-width content-grid">
  <ul>
    <li><a href="/">Home</a></li>
    <li><a href="https://mnt.io/articles/">Articles</a></li>
    <li><a href="https://mnt.io/series/">Series</a></li>
    <li><a href="https://matrix.to/#/&#x23;mnt_io:matrix.org" title="Public Matrix room to discuss about this blog's content">Discuss</a></li>
  </ul>
</nav>

<main vocab="https://schema.org">

  <article class="article" typeof="Article">
    <header>
      <h1 property="name">atoum supports TeamCity</h1>

      
  <div class="metadata">
    <time title="Published date" datetime="2017-11-06" property="datePublished">November 06, 2017</time>
    <span title="Reading time" property="timeRequired" content="PT2M">2 minutes read</span>
    
    <span title="Keywords" property="keywords" content="test, atoum">
      Keywords:&nbsp;<a href="/keywords/test">test</a>, <a href="/keywords/atoum">atoum</a></span>
    
      <span><a href="https://github.com/Hywan/mnt.io/edit/main/content/articles&#x2F;2017-11-06-atoum-supports-teamcity&#x2F;index.md" title="Submit a patch for this page">Edit</a> this page</span>
      
      <meta property="description" content="[atoum](http:&#x2F;&#x2F;atoum.org) gains a new extension: `atoum&#x2F;teamcity-extension` to get full integration with [TeamCity](https:&#x2F;&#x2F;www.jetbrains.com&#x2F;teamcity&#x2F;)!" />
      
    
  </div>

    </header>

    <p><a href="http://atoum.org/">atoum</a> is a popular PHP test framework.
<a href="https://www.jetbrains.com/teamcity/">TeamCity</a> is a Continuous
Integration and Continuous Delivery software developed by Jetbrains.
Despites <a href="http://atoum.org/features.html#reports">atoum supports many industry
standards</a> to report test
execution verdicts, TeamCity uses <a href="https://confluence.jetbrains.com/display/TCD8/Build+Script+Interaction+with+TeamCity">its own non-standard
report</a>,
and thus atoum is not compatible with TeamCityâ€¦ until now.</p>
<p>The <code>atoum/teamcity-extension</code> provides TeamCity support inside atoum.
When executing tests, the reported verdicts are understandable by
TeamCity, and activate all its UI features.</p>
<h2 id="install">Install</h2>
<p>If you have Composer, just run:</p>
<pre data-lang="sh" class="language-sh z-code"><code class="language-sh" data-lang="sh"><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">$</span></span><span class="z-meta z-function-call z-arguments z-shell"> composer require atoum/teamcity-extension <span class="z-string z-quoted z-single z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">&#39;</span>~1.0<span class="z-punctuation z-definition z-string z-end z-shell">&#39;</span></span></span>
</span></code></pre>
<p>From this point, you need to enable the extension in your <code>.atoum.php</code>
configuration file. The following example forces to enable the extension
for every test execution:</p>
<pre data-lang="php" class="language-php z-code"><code class="language-php" data-lang="php"><span class="z-embedding z-php"><span class="z-text z-html z-basic"><span class="z-meta z-embedded z-block z-php"><span class="z-punctuation z-section z-embedded z-begin z-php">&lt;?php</span></span><span class="z-meta z-embedded z-block z-php"><span class="z-source z-php">
</span></span></span></span><span class="z-embedding z-php"><span class="z-text z-html z-basic"><span class="z-meta z-embedded z-block z-php"><span class="z-source z-php">
</span></span></span></span><span class="z-embedding z-php"><span class="z-text z-html z-basic"><span class="z-meta z-embedded z-block z-php"><span class="z-source z-php"><span class="z-variable z-other z-php"><span class="z-punctuation z-definition z-variable z-php">$</span>extension</span> <span class="z-keyword z-operator z-assignment z-php">=</span> <span class="z-keyword z-other z-new z-php">new</span> <span class="z-meta z-path z-php"><span class="z-support z-other z-namespace z-php">atoum</span><span class="z-punctuation z-separator z-namespace z-php">\</span><span class="z-support z-other z-namespace z-php">teamcity</span><span class="z-punctuation z-separator z-namespace z-php">\</span><span class="z-support z-class z-php">extension</span></span><span class="z-meta z-group z-php"><span class="z-punctuation z-section z-group z-begin z-php">(</span><span class="z-variable z-other z-php"><span class="z-punctuation z-definition z-variable z-php">$</span>script</span><span class="z-punctuation z-section z-group z-end z-php">)</span></span><span class="z-punctuation z-terminator z-expression z-php">;</span>
</span></span></span></span><span class="z-embedding z-php"><span class="z-text z-html z-basic"><span class="z-meta z-embedded z-block z-php"><span class="z-source z-php"><span class="z-variable z-other z-php"><span class="z-punctuation z-definition z-variable z-php">$</span>extension</span><span class="z-meta z-function-call z-method z-php"><span class="z-punctuation z-accessor z-arrow z-php">-&gt;</span><span class="z-variable z-function z-php">addToRunner</span></span><span class="z-meta z-function-call z-php"><span class="z-meta z-group z-php"><span class="z-punctuation z-section z-group z-begin z-php">(</span></span></span><span class="z-meta z-function-call z-php"><span class="z-meta z-group z-php"><span class="z-variable z-other z-php"><span class="z-punctuation z-definition z-variable z-php">$</span>runner</span><span class="z-meta z-function-call z-php"><span class="z-meta z-group z-php"><span class="z-punctuation z-section z-group z-end z-php">)</span></span></span></span></span><span class="z-punctuation z-terminator z-expression z-php">;</span>
</span></span></span></span></code></pre>
<p>The following example enables the extension <strong>only within</strong> a TeamCity
environment:</p>
<pre data-lang="php" class="language-php z-code"><code class="language-php" data-lang="php"><span class="z-embedding z-php"><span class="z-text z-html z-basic"><span class="z-meta z-embedded z-block z-php"><span class="z-punctuation z-section z-embedded z-begin z-php">&lt;?php</span></span><span class="z-meta z-embedded z-block z-php"><span class="z-source z-php">
</span></span></span></span><span class="z-embedding z-php"><span class="z-text z-html z-basic"><span class="z-meta z-embedded z-block z-php"><span class="z-source z-php">
</span></span></span></span><span class="z-embedding z-php"><span class="z-text z-html z-basic"><span class="z-meta z-embedded z-block z-php"><span class="z-source z-php"><span class="z-variable z-other z-php"><span class="z-punctuation z-definition z-variable z-php">$</span>extension</span> <span class="z-keyword z-operator z-assignment z-php">=</span> <span class="z-keyword z-other z-new z-php">new</span> <span class="z-meta z-path z-php"><span class="z-support z-other z-namespace z-php">atoum</span><span class="z-punctuation z-separator z-namespace z-php">\</span><span class="z-support z-other z-namespace z-php">teamcity</span><span class="z-punctuation z-separator z-namespace z-php">\</span><span class="z-support z-class z-php">extension</span></span><span class="z-meta z-group z-php"><span class="z-punctuation z-section z-group z-begin z-php">(</span><span class="z-variable z-other z-php"><span class="z-punctuation z-definition z-variable z-php">$</span>script</span><span class="z-punctuation z-section z-group z-end z-php">)</span></span><span class="z-punctuation z-terminator z-expression z-php">;</span>
</span></span></span></span><span class="z-embedding z-php"><span class="z-text z-html z-basic"><span class="z-meta z-embedded z-block z-php"><span class="z-source z-php"><span class="z-variable z-other z-php"><span class="z-punctuation z-definition z-variable z-php">$</span>extension</span><span class="z-meta z-function-call z-method z-php"><span class="z-punctuation z-accessor z-arrow z-php">-&gt;</span><span class="z-variable z-function z-php">addToRunnerWithinTeamCityEnvironment</span></span><span class="z-meta z-function-call z-php"><span class="z-meta z-group z-php"><span class="z-punctuation z-section z-group z-begin z-php">(</span></span></span><span class="z-meta z-function-call z-php"><span class="z-meta z-group z-php"><span class="z-variable z-other z-php"><span class="z-punctuation z-definition z-variable z-php">$</span>runner</span><span class="z-meta z-function-call z-php"><span class="z-meta z-group z-php"><span class="z-punctuation z-section z-group z-end z-php">)</span></span></span></span></span><span class="z-punctuation z-terminator z-expression z-php">;</span>
</span></span></span></span></code></pre>
<p>This latter installation is recommended. That's it ðŸ™‚.</p>
<h2 id="glance">Glance</h2>
<p>The default CLI report looks like this:</p>
<figure>
<p><img src="https://mnt.io/articles/atoum-supports-teamcity/./cli.png" alt="Default atoum CLI report" /></p>
  <figcaption>
<p>The default CLI report is the default one from atoum.</p>
  </figcaption>
</figure>
<p>The TeamCity report looks like this in your terminal (note the
<code>TEAMCITY_VERSION</code> variable as a way to emulate a TeamCity environment):</p>
<figure>
<p><img src="https://mnt.io/articles/atoum-supports-teamcity/./cli-teamcity.png" alt="TeamCity report inside the terminal" /></p>
  <figcaption>
<p>The TeamCity report is text-based, but it is aimed at being consumed by a
formatter to produce HTML.</p>
  </figcaption>
</figure>
<p>Which is less easy to read. However, when it comes into TeamCity UI, we
will have the following result:</p>
<figure>
<p><img src="https://mnt.io/articles/atoum-supports-teamcity/./teamcity.png" alt="TeamCity running atoum" /></p>
  <figcaption>
<p>The final rendering, at an HTML document inside TeamCity itself.</p>
  </figcaption>
</figure>
<p>We are using it at <a href="https://automattic.com/">Automattic</a>. Hope it is
useful for someone else!</p>
<p>If you find any bugs, or would like any other features, please use
Github at the following repository:
<a href="https://github.com/Hywan/atoum-teamcity-extension/">https://github.com/Hywan/atoum-teamcity-extension/</a>.</p>

  </article>

</main>

<footer class="full-width content-grid">
  <div class="footer">
    <div>
      <h2>Contact me</h2>

      <ul>
        <li><a href="https://matrix.to/#/@mnt_io:matrix.org" title="Say hi on Matrix">@mnt_io:matrix.org</a></li>
        <li><a href="mailto:ivan@mnt.io" title="Good ol' email">ivan@mnt.io</a></li>
        <li><a href="https://floss.social/@hywan" title="Say hi on Mastodon" rel="me">Mastodon</a></li>
        <li><a href="https://github.com/Hywan" title="Say hi on Github">Github</a></li>
      </ul>
    </div>
    <div>
      <h2>Recommendations</h2>

      <ul>
        <li><a href="https://fasterthanli.me/">fasterthanli.me</a></li>
        <li><a href="https://without.boats/blog/">without.boats</a></li>
        <li><a href="https://faultlore.com/blah/">faultlore.com</a></li>
        <li><a href="https://smallcultfollowing.com/babysteps/blog/">smallcultfollowing.com</a></li>
        <li><a href="https://orlp.net/blog/">orlp.net</a></li>
      </ul>
    </div>

    <div>
      <h2>More</h2>

      <ul>
        <li><a href="https://mnt.io/lore/">Lore</a></li>
        <li><a href="https://mnt.io/rss.xml">RSS</a></li>
        <li><a href="https://mnt.io/atom.xml">Atom</a></li>
        <li><a href="https://github.com/Hywan/mnt.io" title="Source code of this site">Source code</a></li>
        <li><a href="https://dblp.org/search/index.php?query=Ivan%20Enderlin" title="Computer Science Bibliography">DBLP</a></li>
      </ul>
    </div>
  </div>
</footer>

<script defer src="https://cloud.umami.is/script.js" data-website-id="30754987-0af7-4ea0-9bd3-711c543b6ecb"></script>
</body>
</html>
